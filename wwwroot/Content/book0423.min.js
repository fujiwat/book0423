(function(n){"use strict";Date.now||(Date.now=function(){return(new Date).getTime()});Math.trunc||(Math.trunc=function(n){return n<0?Math.ceil(n):Math.floor(n)});Object.setPrototypeOf||(Object.setPrototypeOf=function(n,t){return n.__proto__=t,n});n.IntelliFactory={Runtime:{Ctor:function(n,t){return n.prototype=t.prototype,n},Class:function(n,t,i){var u=n,f,r,e;if(t){u=new t;for(f in n)u[f]=n[f]}if(r=function(n){if(n)for(var t in n)this[t]=n[t]},r.prototype=u,i)for(e in i)r[e]=i[e];return r},Clone:function(n){var t={};for(var i of Object.getOwnPropertyNames(n))t[i]=n[i];return Object.setPrototypeOf(t,Object.getPrototypeOf(n)),t},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},PrintObject:function(n){var t="{ ",i=!0;for(var r of Object.getOwnPropertyNames(n))i?i=!1:t+=", ",t+=r+" = "+n[r];return t+(i?"}":" }")},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===void 0&&delete n[r];return n},GetOptional:function(n){return n===void 0?null:{$:1,$0:n}},SetOptional:function(n,t,i){i?n[t]=i.$0:delete n[t]},SetOrDelete:function(n,t,i){i===void 0?delete n[t]:n[t]=i},Apply:function(n,t,i){return n.apply(t,i)},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},BindDelegate:function(n,t){var i=n.bind(t);return i.$Func=n,i.$Target=t,i},CreateDelegate:function(n){if(n.length==0)return null;if(n.length==1)return n[0];var t=function(){for(var i,t=0;t<n.length;t++)i=n[t].apply(null,arguments);return i};return t.$Invokes=n,t},CombineDelegates:function(n){for(var t,i=[],r=0;r<n.length;r++)t=n[r],t&&("$Invokes"in t?i=i.concat(t.$Invokes):i.push(t));return IntelliFactory.Runtime.CreateDelegate(i)},DelegateEqual:function(n,t){var f,e,i,r,u;if(n===t)return!0;if(n==null||t==null||(f=n.$Invokes||[n],e=t.$Invokes||[t],f.length!=e.length))return!1;for(i=0;i<f.length;i++)if(r=f[i],u=e[i],!(r===u||"$Func"in r&&"$Func"in u&&r.$Func===u.$Func&&r.$Target==u.$Target))return!1;return!0},ThisFunc:function(n){return function(){var t=Array.prototype.slice.call(arguments);return t.unshift(this),n.apply(null,t)}},ThisFuncOut:function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(t.shift(),t)}},ParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat([i.slice(n)]))}},ParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(null,i.slice(0,n).concat(i[n]))}},ThisParamsFunc:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return i.unshift(this),t.apply(null,i.slice(0,n+1).concat([i.slice(n+1)]))}},ThisParamsFuncOut:function(n,t){return function(){var i=Array.prototype.slice.call(arguments);return t.apply(i.shift(),i.slice(0,n).concat(i[n]))}},Curried:function(n,t,i){return i=i||[],function(r){var u=i.concat([r===void 0?null:r]);return t==1?n.apply(null,u):t==2?function(t){return n.apply(null,u.concat([t===void 0?null:t]))}:IntelliFactory.Runtime.Curried(n,t-1,u)}},Curried2:function(n){return function(t){return function(i){return n(t,i)}}},Curried3:function(n){return function(t){return function(i){return function(r){return n(t,i,r)}}}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");},ScriptBasePath:"./",ScriptPath:function(n,t){return this.ScriptBasePath+(this.ScriptSkipAssemblyDir?"":n+"/")+t},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"load"in this&&(n(this.load),this.load=[])}}};n.IntelliFactory.Runtime.OnLoad(function(){n.WebSharper&&WebSharper.Activator&&WebSharper.Activator.Activate&&WebSharper.Activator.Activate()});n.ignore=function(){};n.id=function(n){return n};n.fst=function(n){return n[0]};n.snd=function(n){return n[1]};n.trd=function(n){return n[2]};n.console||(n.console={count:ignore,dir:ignore,error:ignore,group:ignore,groupEnd:ignore,info:ignore,log:ignore,profile:ignore,profileEnd:ignore,time:ignore,timeEnd:ignore,trace:ignore,warn:ignore})})(self);
/* https://github.com/jonathantneal/closest */
(function(w,p){p=w.Element.prototype
if(!p.matches){p.matches=p.msMatchesSelector||function(s){var m=(this.document||this.ownerDocument).querySelectorAll(s);for(var i=0;m[i]&&m[i]!==e;++i);return!!m[i]}}
if(!p.closest){p.closest=function(s){var e=this;while(e&&e.nodeType==1){if(e.matches(s))return e;e=e.parentNode}return null}}})(self);
(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(a){"use strict";var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,$,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA,bB,bC,bD,bE,bF,bG,bH,bI,bJ,bK,bL,bM,bN,bO,bP,bQ,bR,bS;b=a.book0423=a.book0423||{};c=b.Client=b.Client||{};d=a.WebSharper=a.WebSharper||{};e=d.Obj=d.Obj||{};f=d.UI=d.UI||{};g=f.Var$1=f.Var$1||{};h=f.ListModel=f.ListModel||{};i=c.Entry=c.Entry||{};j=d.Operators=d.Operators||{};k=f.Templating=f.Templating||{};l=k.Runtime=k.Runtime||{};m=l.Server=l.Server||{};n=m.TemplateInstance=m.TemplateInstance||{};o=d.Arrays=d.Arrays||{};p=m.ProviderBuilder=m.ProviderBuilder||{};q=f.Var=f.Var||{};r=m.Handler=m.Handler||{};s=d.Unchecked=d.Unchecked||{};t=a.book0423_Templates=a.book0423_Templates||{};u=d.Seq=d.Seq||{};v=f.Doc=f.Doc||{};w=f.ConcreteVar=f.ConcreteVar||{};x=f.Snap=f.Snap||{};y=d.Numeric=d.Numeric||{};z=a.System=a.System||{};A=z.Guid=z.Guid||{};B=d.Collections=d.Collections||{};C=B.List=B.List||{};D=d.Strings=d.Strings||{};E=d.JavaScript=d.JavaScript||{};F=E.Pervasives=E.Pervasives||{};G=f.Client=f.Client||{};H=G.Templates=G.Templates||{};I=d.Enumerator=d.Enumerator||{};J=I.T=I.T||{};K=f.Array=f.Array||{};L=f.Abbrev=f.Abbrev||{};M=L.Fresh=L.Fresh||{};N=f.Storage=f.Storage||{};O=f.View=f.View||{};P=B.Dictionary=B.Dictionary||{};Q=a.Object;R=B.HashSet=B.HashSet||{};S=m.TemplateInitializer=m.TemplateInitializer||{};T=a.EventTarget;U=a.Node;V=E.JS=E.JS||{};W=d.List=d.List||{};X=W.T=W.T||{};Y=f.AttrProxy=f.AttrProxy||{};Z=f.CheckedInput=f.CheckedInput||{};_0=N.ArrayStorage=N.ArrayStorage||{};_1=B.DictionaryUtil=B.DictionaryUtil||{};_2=a.StartupCode$WebSharper_UI$Templates=a.StartupCode$WebSharper_UI$Templates||{};_3=a.WindowOrWorkerGlobalScope;_4=f.Docs=f.Docs||{};_5=f.DocElemNode=f.DocElemNode||{};_6=a.CharacterData;_7=a.StartupCode$WebSharper_UI$Abbrev=a.StartupCode$WebSharper_UI$Abbrev||{};_8=f.Elt=f.Elt||{};_9=H.Prepare=H.Prepare||{};_=d.Slice=d.Slice||{};$=f.DomUtility=f.DomUtility||{};ba=B.KeyCollection=B.KeyCollection||{};bb=f.An=f.An||{};bc=G.Settings=G.Settings||{};bd=L.Mailbox=L.Mailbox||{};be=G.Attrs=G.Attrs||{};bf=be.Dyn=be.Dyn||{};bg=f.Attrs=f.Attrs||{};bh=f.AttrModule=f.AttrModule||{};bi=f.Updates=f.Updates||{};bj=B.ValueCollection=B.ValueCollection||{};bk=G.Docs=G.Docs||{};bl=bk.RunState=bk.RunState||{};bm=bk.NodeSet=bk.NodeSet||{};bn=d.Concurrency=d.Concurrency||{};bo=f.Anims=f.Anims||{};bp=a.StartupCode$WebSharper_UI$Doc_Proxy=a.StartupCode$WebSharper_UI$Doc_Proxy||{};bq=B.HashSetUtil=B.HashSetUtil||{};br=f.BindVar=f.BindVar||{};bs=a.StartupCode$WebSharper_UI$DomUtility=a.StartupCode$WebSharper_UI$DomUtility||{};bt=a.StartupCode$WebSharper_UI$Animation=a.StartupCode$WebSharper_UI$Animation||{};bu=f.AppendList=f.AppendList||{};bv=a.StartupCode$WebSharper_UI$Attr_Client=a.StartupCode$WebSharper_UI$Attr_Client||{};bw=f.DynamicAttrNode=f.DynamicAttrNode||{};bx=bn.Scheduler=bn.Scheduler||{};by=f.Easing=f.Easing||{};bz=bn.AsyncBody=bn.AsyncBody||{};bA=a.StartupCode$WebSharper_Main$Concurrency=a.StartupCode$WebSharper_Main$Concurrency||{};bB=bn.CT=bn.CT||{};bC=L.HashSet=L.HashSet||{};bD=d.Queue=d.Queue||{};bE=f.String=f.String||{};bF=d.CancellationTokenSource=d.CancellationTokenSource||{};bG=bk.DomNodes=bk.DomNodes||{};bH=d.Char=d.Char||{};bI=a.Error;bJ=d.OperationCanceledException=d.OperationCanceledException||{};bK=d.Lazy=d.Lazy||{};bL=a.StartupCode$WebSharper_UI$AppendList=a.StartupCode$WebSharper_UI$AppendList||{};bM=d.LazyExtensionsProxy=d.LazyExtensionsProxy||{};bN=bM.LazyRecord=bM.LazyRecord||{};bO=a.IntelliFactory;bP=bO&&bO.Runtime;bQ=a.console;bR=a.Math;bS=a.Date;c.Main=function(){var bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8,b9,b_,b$,ca,cb;function cc(cd){var ce,cf,cg,ch,ci,cj,ck;return(ce=(cf=(cg=(ch=(ci=new p.New$1(),(ci.h.push({$:1,$0:"flag",$1:cd.Flag}),ci)),(ch.h.push({$:1,$0:"title",$1:cd.Title}),ch)),(cg.h.push({$:1,$0:"author",$1:cd.Author}),cg)),(cf.h.push({$:1,$0:"published",$1:a.String(cd.Published)}),cf)),(cj=r.CompleteHoles(ce.k,ce.h,[]),(ck=new n.New(cj[1],t.row(cj[0])),ce.i=ck,ck))).get_Doc();}bT=g.Create$1("");bU=g.Create$1("");bV=g.Create$1(2022);bW=g.Create$1("");bX=g.Create$1("=== REGISTERED BOOKS ===");bY=h.FromSeq([i.Create("","In Search of Lost Time","Marcel Proust",1900),i.Create("","Ulysses","James Joyce",1901),i.Create("","Don Quixote","Miguel de Cervantes",1902),i.Create("","One Hundred Years of Solitude","Gabriel Garcia Marquez",1903),i.Create("","The Great Gatsby","F. Scott Fitzgerald",1904),i.Create("","Moby Dick","Herman Melville",1905),i.Create("","War and Peace","Leo Tolstoy",1906),i.Create("","Hamlet","William Shakespeare",1907),i.Create("","The Odyssey","Homer",1908),i.Create("","Madame Bovary","Gustave Flaubert",1909),i.Create("","The Divine Comedy","Dante Alighieri",1910),i.Create("","Lolita","Vladimir Nabokov",1911),i.Create("","The Brothers Karamazov","Fyodor Dostoyevsky",1912),i.Create("","Crime and Punishment","Fyodor Dostoyevsky",1913),i.Create("","Wuthering Heights","Emily Bront?",1914),i.Create("","The Catcher in the Rye","J. D. Salinger",1915),i.Create("","Pride and Prejudice","Jane Austen",1916),i.Create("","The Adventures of Huckleberry Finn","Mark Twain",1917),i.Create("","Anna Karenina","Leo Tolstoy",1918),i.Create("","Alice's Adventures in Wonderland","Lewis Carroll",1919),i.Create("","The Iliad","Homer",1920),i.Create("","To the Lighthouse","Virginia Woolf",1921),i.Create("","Catch-22","Joseph Heller",1922),i.Create("","Heart of Darkness","Joseph Conrad",1923),i.Create("","The Sound and the Fury","William Faulkner",1924),i.Create("","Nineteen Eighty Four","George Orwell",1925),i.Create("","Great Expectations","Charles Dickens",1926),i.Create("","One Thousand and One Nights","India/Iran/Iraq/Egypt",1927),i.Create("","The Grapes of Wrath","John Steinbeck",1928),i.Create("","Absalom, Absalom!","William Faulkner",1929),i.Create("","Invisible Man","Ralph Ellison",1930),i.Create("","To Kill a Mockingbird","Harper Lee",1931),i.Create("","The Trial","Franz Kafka",1932),i.Create("","The Red and the Black","Stendhal",1933),i.Create("","Middlemarch","George Eliot",1934),i.Create("","Gulliver's Travels","Jonathan Swift",1935),i.Create("","Beloved","Toni Morrison",1936),i.Create("","Mrs. Dalloway","Virginia Woolf",1937),i.Create("","The Stories of Anton Chekhov","Anton Chekhov",1938),i.Create("","The Stranger","Albert Camus",1939),i.Create("","Jane Eyre","Charlotte Bronte",1940),i.Create("","The Aeneid","Virgil",1941),i.Create("","Collected Fiction","Jorge Luis Borges",1942),i.Create("","The Sun Also Rises","Ernest Hemingway",1943),i.Create("","David Copperfield","Charles Dickens",1944),i.Create("","Tristram Shandy","Laurence Sterne",1945),i.Create("","Leaves of Grass","Walt Whitman",1946),i.Create("","The Magic Mountain","Thomas Mann",1947),i.Create("","A Portrait of the Artist as a Young Man","James Joyce",1948),i.Create("","Midnight's Children","Salman Rushdie",1949)]);bZ=h.FromSeq([]);bY.Iter(function(cd){bZ.Append(i.Create(cd.Flag,cd.Title,cd.Author,cd.Published));});b0=v.BindView(function(cd){return v.Concat(u.map(cc,cd));},bZ.v);b1=(b2=(b3=(b4=(b5=(b6=(b7=(b8=(b9=(b_=bX.get_View(),(b$=new p.New$1(),(b$.h.push({$:2,$0:"caption",$1:b_}),b$))),(b9.h.push({$:0,$0:"data",$1:b0}),b9)),(b8.h.push({$:8,$0:"title",$1:bT}),b8)),(b7.h.push({$:8,$0:"author",$1:bU}),b7)),(b6.h.push({$:11,$0:"published",$1:bV}),b6)),(b5.h.push({$:8,$0:"msg",$1:bW}),b5)),(b4.h.push(r.EventQ2(b4.k,"reister",function(){return b4.i;},function(){bX.Set("=== REGISTERED BOOKS ===");bZ.Clear();bZ.Append(i.Create("Registered",bT.Get(),bU.Get(),bV.Get()));bY.Iter(function(cd){bZ.Append(i.Create(cd.Flag,cd.Title,cd.Author,cd.Published));});bY.Clear();bZ.Iter(function(cd){bY.Append(i.Create(cd.Flag,cd.Title,cd.Author,cd.Published));});bW.Set("Book \""+a.String(bT.Get())+"\" by \""+a.String(bU.Get())+"\" is added to the top.");bT.Set("");})),b4)),(b3.h.push(r.EventQ2(b3.k,"search",function(){return b3.i;},function(){bX.Set("=== BOOK SEARCH RESULT ===");bZ.Clear();bY.Iter(function(cd){(D.Trim(bT.Get())==""||cd.Title.toLowerCase().indexOf(bT.Get().toLowerCase())!=-1)&&(D.Trim(bU.Get())==""||cd.Author.toLowerCase().indexOf(bU.Get().toLowerCase())!=-1)?bZ.Append(i.Create(cd.Flag,cd.Title,cd.Author,cd.Published)):void 0;});bW.Set(bZ.get_Length()===0?(bZ.Append(i.Create("","","",0)),"Book \""+bT.Get()+"\" by \""+bU.Get()+"\" is not found."):"Book \""+bT.Get()+"\" by \""+bU.Get()+"\" is found, "+a.String(bZ.get_Length())+(bZ.get_Length()===1?" Book.":" Books."));})),b3)),(ca=r.CompleteHoles(b2.k,b2.h,[["title",0],["author",0],["published",1],["msg",0]]),(cb=new n.New(ca[1],t.main(ca[0])),b2.i=cb,cb))).get_Doc();H.LoadLocalTemplates("");v.RunById("main",b1);};e=d.Obj=bP.Class({Equals:function(bT){return this===bT;},GetHashCode:function(){return -1;}},null,e);e.New=bP.Ctor(function(){},e);g=f.Var$1=bP.Class({},e,g);g.Create$1=function(bT){return new w.New(false,x.New({$:2,$0:bT,$1:[]}),bT);};h.FromSeq=function(bT){return h.Create(a.id,bT);};h.Create=function(bT,bU){return h.CreateWithStorage(bT,N.InMemory(o.ofSeq(bU)));};h.CreateWithStorage=function(bT,bU){return new h.New(bT,bU);};i.Create=function(bT,bU,bV,bW){return i.New(bT,bU,bV,bW);};i.New=function(bT,bU,bV,bW){return{Flag:bT,Title:bU,Author:bV,Published:bW};};h=f.ListModel=bP.Class({Iter:function(bT){o.iter(bT,this["var"].Get());},Clear:function(){this["var"].Set(this.storage.SSet([]));this.ObsoleteAll();},get_Length:function(){return o.length(this["var"].Get());},Append:function(bT){var bU,bV,bW,bX;bU=this;bV=this["var"].Get();bW=this.key(bT);bX=o.tryFindIndex(function(bY){return s.Equals(bU.key(bY),bW);},bV);if(bX!=null&&bX.$==1)this["var"].Set(this.storage.SSetAt(bX.$0,bT,bV));else this["var"].Set(this.storage.SAppend(bT,bV));this.ObsoleteKey(bW);},ObsoleteAll:function(){u.iter(function(bT){x.Obsolete(bT.V);},this.it);this.it.Clear();},ObsoleteKey:function(bT){var bU,bV;bU=(bV=null,[this.it.TryGetValue(bT,{get:function(){return bV;},set:function(bW){bV=bW;}}),bV]);if(bU[0]){x.Obsolete(bU[1]);this.it.Remove(bT);}},GetEnumerator:function(){return I.Get(this["var"].Get());},GetEnumerator0:function(){return I.Get0(this["var"].Get());}},e,h);h.New=bP.Ctor(function(bT,bU){h.New$3.call(this,bT,g.Create$1(o.ofSeq(u.distinctBy(bT,bU.SInit()))),bU);},h);h.New$3=bP.Ctor(function(bT,bU,bV){e.New.call(this);this.key=bT;this["var"]=bU;this.storage=bV;this.v=O.Map(function(bW){return bW.slice();},this["var"].get_View());this.it=new P.New$5();},h);j.FailWith=function(bT){throw new bI(bT);};j.KeyValue=function(bT){return[bT.K,bT.V];};n=m.TemplateInstance=bP.Class({get_Doc:function(){return this.doc;}},e,n);n.New=bP.Ctor(function(bT,bU){e.New.call(this);this.doc=bU;this.allVars=bT.$==0?bT.$0:j.FailWith("Should not happen");},n);o.length=function(bT){return bT.dims===2?bT.length*bT.length:bT.length;};o.get=function(bT,bU){o.checkBounds(bT,bU);return bT[bU];};o.checkBounds=function(bT,bU){if(bU<0||bU>=bT.length)j.FailWith("Index was outside the bounds of the array.");};o.set=function(bT,bU,bV){o.checkBounds(bT,bU);bT[bU]=bV;};p=m.ProviderBuilder=bP.Class({},e,p);p.New$1=bP.Ctor(function(){var bT;e.New.call(this);this.i=null;this.k=(bT=A.NewGuid(),a.String(bT));this.h=[];bP.SetOptional(this,"s",null);},p);q=f.Var=bP.Class({},e,q);q.New=bP.Ctor(function(){e.New.call(this);},q);r.EventQ2=function(bT,bU,bV,bW){return{$:5,$0:bU,$1:function(bX){return function(bY){return bW({Vars:bV(),Target:bX,Event:bY});};}};};r.CompleteHoles=function(bT,bU,bV){var bX,bY,bZ,b0,b1;function bW(b2,b3){var b4;return bY.Contains(b2)?null:(b4=s.Equals(b3,0)?S.GetOrAddHoleFor(bT,b2,function(){return{$:8,$0:b2,$1:g.Create$1("")};}):s.Equals(b3,1)?S.GetOrAddHoleFor(bT,b2,function(){return{$:13,$0:b2,$1:g.Create$1(0)};}):s.Equals(b3,2)?S.GetOrAddHoleFor(bT,b2,function(){return{$:9,$0:b2,$1:g.Create$1(false)};}):j.FailWith("Invalid value type"),(bX.set_Item(b2,b4),{$:1,$0:b4}));}bX=new P.New$5();bY=new R.New$3();bZ=I.Get(bU);try{while(bZ.MoveNext()){b0=bZ.Current();b1=b0.$0;bY.Add(b1);bX.set_Item(b1,b0);}}finally{if(typeof bZ=="object"&&"Dispose"in bZ)bZ.Dispose();}return[u.append(bU,o.choose(function(b2){return bW(b2[0],b2[1]);},bV)),{$:0,$0:bX}];};s.Equals=function(bT,bU){var bV,bW,bX,bY;if(bT===bU)return true;else{bV=typeof bT;if(bV=="object"){if(bT===null||bT===void 0||bU===null||bU===void 0||!s.Equals(typeof bU,"object"))return false;else if("Equals"in bT)return bT.Equals(bU);else if("Equals"in bU)return false;else if(bT instanceof a.Array&&bU instanceof a.Array)return s.arrayEquals(bT,bU);else if(bT instanceof a.Date&&bU instanceof a.Date)return s.dateEquals(bT,bU);else{bW=[true];for(var bZ in bT)if(function(b0){bW[0]=!bT.hasOwnProperty(b0)||bU.hasOwnProperty(b0)&&s.Equals(bT[b0],bU[b0]);return!bW[0];}(bZ))break;if(bW[0]){for(var b0 in bU)if(function(b1){bW[0]=!bU.hasOwnProperty(b1)||bT.hasOwnProperty(b1);return!bW[0];}(b0))break;}return bW[0];}}else return bV=="function"&&("$Func"in bT?bT.$Func===bU.$Func&&bT.$Target===bU.$Target:"$Invokes"in bT&&"$Invokes"in bU&&s.arrayEquals(bT.$Invokes,bU.$Invokes));}};s.arrayEquals=function(bT,bU){var bV,bW;if(o.length(bT)===o.length(bU)){bV=true;bW=0;while(bV&&bW<o.length(bT)){!s.Equals(o.get(bT,bW),o.get(bU,bW))?bV=false:void 0;bW=bW+1;}return bV;}else return false;};s.dateEquals=function(bT,bU){return bT.getTime()===bU.getTime();};s.Hash=function(bT){var bU;bU=typeof bT;return bU=="function"?0:bU=="boolean"?bT?1:0:bU=="number"?bT:bU=="string"?s.hashString(bT):bU=="object"?bT==null?0:bT instanceof a.Array?s.hashArray(bT):s.hashObject(bT):0;};s.hashString=function(bT){var bU,bV,bW;if(bT===null)return 0;else{bU=5381;for(bV=0,bW=bT.length-1;bV<=bW;bV++)bU=s.hashMix(bU,bT[bV].charCodeAt());return bU;}};s.hashArray=function(bT){var bU,bV,bW;bU=-34948909;for(bV=0,bW=o.length(bT)-1;bV<=bW;bV++)bU=s.hashMix(bU,s.Hash(o.get(bT,bV)));return bU;};s.hashObject=function(bT){var bU,bV;if("GetHashCode"in bT)return bT.GetHashCode();else{bU=[0];for(var bW in bT)if(function(bX){bU[0]=s.hashMix(s.hashMix(bU[0],s.hashString(bX)),s.Hash(bT[bX]));return false;}(bW))break;return bU[0];}};s.hashMix=function(bT,bU){return(bT<<5)+bT+bU;};s.Compare=function(bT,bU){var bV,bW,bX,bY,bZ,b0;if(bT===bU)return 0;else{bW=typeof bT;switch(bW=="function"?1:bW=="boolean"?2:bW=="number"?2:bW=="string"?2:bW=="object"?3:0){case 0:return typeof bU=="undefined"?0:-1;case 1:return j.FailWith("Cannot compare function values.");case 2:return bT<bU?-1:1;case 3:if(bT===null)bX=-1;else if(bU===null)bX=1;else if("CompareTo"in bT)bX=bT.CompareTo(bU);else if("CompareTo0"in bT)bX=bT.CompareTo0(bU);else if(bT instanceof a.Array&&bU instanceof a.Array)bX=s.compareArrays(bT,bU);else if(bT instanceof a.Date&&bU instanceof a.Date)bX=s.compareDates(bT,bU);else{bY=[0];for(var b1 in bT)if(function(b2){return!bT.hasOwnProperty(b2)?false:!bU.hasOwnProperty(b2)?(bY[0]=1,true):(bY[0]=s.Compare(bT[b2],bU[b2]),bY[0]!==0);}(b1))break;if(bY[0]===0){for(var b2 in bU)if(function(b3){return!bU.hasOwnProperty(b3)?false:!bT.hasOwnProperty(b3)&&(bY[0]=-1,true);}(b2))break;}bX=bY[0];}return bX;}}};s.compareArrays=function(bT,bU){var bV,bW;if(o.length(bT)<o.length(bU))return -1;else if(o.length(bT)>o.length(bU))return 1;else{bV=0;bW=0;while(bV===0&&bW<o.length(bT)){bV=s.Compare(o.get(bT,bW),o.get(bU,bW));bW=bW+1;}return bV;}};s.compareDates=function(bT,bU){return s.Compare(bT.getTime(),bU.getTime());};t.main=function(bT){H.LoadLocalTemplates("index");return bT?H.NamedTemplate("index",{$:1,$0:"main"},bT):void 0;};t.row=function(bT){H.LoadLocalTemplates("index");return bT?H.NamedTemplate("index",{$:1,$0:"row"},bT):void 0;};u.map=function(bT,bU){return{GetEnumerator:function(){var bV;bV=I.Get(bU);return new J.New(null,null,function(bW){return bV.MoveNext()&&(bW.c=bT(bV.Current()),true);},function(){bV.Dispose();});}};};u.iter=function(bT,bU){var bV;bV=I.Get(bU);try{while(bV.MoveNext())bT(bV.Current());}finally{if(typeof bV=="object"&&"Dispose"in bV)bV.Dispose();}};u.append=function(bT,bU){return{GetEnumerator:function(){var bV,bW;bV=I.Get(bT);bW=[true];return new J.New(bV,null,function(bX){var bY;return bX.s.MoveNext()?(bX.c=bX.s.Current(),true):(bY=bX.s,!s.Equals(bY,null)?bY.Dispose():void 0,bX.s=null,bW[0]&&(bW[0]=false,bX.s=I.Get(bU),bX.s.MoveNext()?(bX.c=bX.s.Current(),true):(bX.s.Dispose(),bX.s=null,false)));},function(bX){var bY;bY=bX.s;if(!s.Equals(bY,null))bY.Dispose();});}};};u.head=function(bT){var bU;bU=I.Get(bT);try{return bU.MoveNext()?bU.Current():u.insufficient();}finally{if(typeof bU=="object"&&"Dispose"in bU)bU.Dispose();}};u.distinctBy=function(bT,bU){return{GetEnumerator:function(){var bV,bW;bV=I.Get(bU);bW=new R.New$3();return new J.New(null,null,function(bX){var bY,bZ;if(bV.MoveNext()){bY=bV.Current();bZ=bW.Add(bT(bY));while(!bZ&&bV.MoveNext()){bY=bV.Current();bZ=bW.Add(bT(bY));}return bZ&&(bX.c=bY,true);}else return false;},function(){bV.Dispose();});}};};u.fold=function(bT,bU,bV){var bW,bX;bW=bU;bX=I.Get(bV);try{while(bX.MoveNext())bW=bT(bW,bX.Current());return bW;}finally{if(typeof bX=="object"&&"Dispose"in bX)bX.Dispose();}};u.max=function(bT){var bU,bV,bW;bU=I.Get(bT);try{if(!bU.MoveNext())u.seqEmpty();bV=bU.Current();while(bU.MoveNext()){bW=bU.Current();if(s.Compare(bW,bV)===1)bV=bW;}return bV;}finally{if(typeof bU=="object"&&"Dispose"in bU)bU.Dispose();}};u.seqEmpty=function(){return j.FailWith("The input sequence was empty.");};u.forall=function(bT,bU){return!u.exists(function(bV){return!bT(bV);},bU);};u.exists=function(bT,bU){var bV,bW;bV=I.Get(bU);try{bW=false;while(!bW&&bV.MoveNext())bW=bT(bV.Current());return bW;}finally{if(typeof bV=="object"&&"Dispose"in bV)bV.Dispose();}};v=f.Doc=bP.Class({},e,v);v.Concat=function(bT){var bU;bU=K.ofSeqNonCopying(bT);return K.TreeReduce(v.get_Empty(),v.Append,bU);};v.RunById=function(bT,bU){var bV;bV=self.document.getElementById(bT);if(s.Equals(bV,null))j.FailWith("invalid id: "+bT);else v.Run(bV,bU);};v.Append=function(bT,bU){return v.Mk({$:0,$0:bT.docNode,$1:bU.docNode},O.Map2Unit(bT.updates,bU.updates));};v.get_Empty=function(){return v.Mk(null,O.Const());};v.Run=function(bT,bU){_4.LinkElement(bT,bU.docNode);v.RunInPlace(false,bT,bU);};v.BindView=function(bT,bU){return v.EmbedView(O.Map(bT,bU));};v.Mk=function(bT,bU){return new v.New(bT,bU);};v.RunInPlace=function(bT,bU,bV){var bW;bW=_4.CreateRunState(bU,bV.docNode);O.Sink(bb.get_UseAnimations()||bc.BatchUpdatesEnabled()?bd.StartProcessor(_4.PerformAnimatedUpdate(bT,bW,bV.docNode)):function(){_4.PerformSyncUpdate(bT,bW,bV.docNode);},bV.updates);};v.EmbedView=function(bT){var bU;bU=_4.CreateEmbedNode();return v.Mk({$:2,$0:bU},O.Map(a.ignore,O.Bind(function(bV){_4.UpdateEmbedNode(bU,bV.docNode);return bV.updates;},bT)));};v.TextNode=function(bT){return v.Mk({$:5,$0:self.document.createTextNode(bT)},O.Const());};v.TextView=function(bT){var bU;bU=_4.CreateTextNode();return v.Mk({$:4,$0:bU},O.Map(function(bV){_4.UpdateTextNode(bU,bV);},bT));};v.New=bP.Ctor(function(bT,bU){e.New.call(this);this.docNode=bT;this.updates=bU;},v);w=f.ConcreteVar=bP.Class({get_View:function(){return this.view;},Set:function(bT){if(this.isConst)(function(bU){return bU("WebSharper.UI: invalid attempt to change value of a Var after calling SetFinal");}(function(bU){bQ.log(bU);}));else{x.Obsolete(this.snap);this.current=bT;this.snap=x.New({$:2,$0:bT,$1:[]});}},Get:function(){return this.current;},UpdateMaybe:function(bT){var bU;bU=bT(this.Get());if(bU!=null&&bU.$==1)this.Set(bU.$0);}},q,w);w.New=bP.Ctor(function(bT,bU,bV){var bW;bW=this;q.New.call(this);this.isConst=bT;this.current=bV;this.snap=bU;this.view=function(){return bW.snap;};this.id=M.Int();},w);x.Map2Unit=function(bT,bU){var bV,bW,bX;function bY(){var bZ,b0,b1;if(!(bZ=bX.s,bZ!=null&&bZ.$==0||bZ!=null&&bZ.$==2)){b0=x.ValueAndForever(bT);b1=x.ValueAndForever(bU);if(b0!=null&&b0.$==1)b1!=null&&b1.$==1?b0.$0[1]&&b1.$0[1]?x.MarkForever(bX,null):x.MarkReady(bX,null):void 0;}}bV=bT.s;bW=bU.s;return bV!=null&&bV.$==0?bW!=null&&bW.$==0?x.New({$:0,$0:null}):bU:bW!=null&&bW.$==0?bT:(bX=x.New({$:3,$0:[],$1:[]}),(x.When(bT,bY,bX),x.When(bU,bY,bX),bX));};x.Map=function(bT,bU){var bV,bW;bV=bU.s;return bV!=null&&bV.$==0?x.New({$:0,$0:bT(bV.$0)}):(bW=x.New({$:3,$0:[],$1:[]}),(x.When(bU,function(bX){x.MarkDone(bW,bU,bT(bX));},bW),bW));};x.WhenObsoleteRun=function(bT,bU){var bV;bV=bT.s;if(bV==null)bU();else bV!=null&&bV.$==2?bV.$1.push(bU):bV!=null&&bV.$==3?bV.$1.push(bU):void 0;};x.ValueAndForever=function(bT){var bU;bU=bT.s;return bU!=null&&bU.$==0?{$:1,$0:[bU.$0,true]}:bU!=null&&bU.$==2?{$:1,$0:[bU.$0,false]}:null;};x.MarkForever=function(bT,bU){var bV,bW,bX,bY;bV=bT.s;if(bV!=null&&bV.$==3){bT.s={$:0,$0:bU};bW=bV.$0;for(bX=0,bY=o.length(bW)-1;bX<=bY;bX++)(o.get(bW,bX))(bU);}else void 0;};x.MarkReady=function(bT,bU){var bV,bW,bX,bY;bV=bT.s;if(bV!=null&&bV.$==3){bT.s={$:2,$0:bU,$1:bV.$1};bW=bV.$0;for(bX=0,bY=o.length(bW)-1;bX<=bY;bX++)(o.get(bW,bX))(bU);}else void 0;};x.When=function(bT,bU,bV){var bW;bW=bT.s;if(bW==null)x.Obsolete(bV);else bW!=null&&bW.$==2?(x.EnqueueSafe(bW.$1,bV),bU(bW.$0)):bW!=null&&bW.$==3?(bW.$0.push(bU),x.EnqueueSafe(bW.$1,bV)):bU(bW.$0);};x.WhenRun=function(bT,bU,bV){var bW;bW=bT.s;if(bW==null)bV();else bW!=null&&bW.$==2?(bW.$1.push(bV),bU(bW.$0)):bW!=null&&bW.$==3?(bW.$0.push(bU),bW.$1.push(bV)):bU(bW.$0);};x.MarkDone=function(bT,bU,bV){var bW;if(bW=bU.s,bW!=null&&bW.$==0)x.MarkForever(bT,bV);else x.MarkReady(bT,bV);};x.EnqueueSafe=function(bT,bU){var bV,bW,bX,bY;bT.push(bU);if(bT.length%20===0){bV=bT.slice(0);bD.Clear(bT);for(bW=0,bX=o.length(bV)-1;bW<=bX;bW++){bY=o.get(bV,bW);if(typeof bY=="object")(function(bZ){if(bZ.s)bT.push(bZ);}(bY));else(function(bZ){bT.push(bZ);}(bY));}}else void 0;};x.Map3=function(bT,bU,bV,bW){var bX,bY,bZ,b0;function b1(b2){var b3,b4,b5,b6;if(!(b3=b0.s,b3!=null&&b3.$==0||b3!=null&&b3.$==2)){b4=x.ValueAndForever(bU);b5=x.ValueAndForever(bV);b6=x.ValueAndForever(bW);if(b4!=null&&b4.$==1)b5!=null&&b5.$==1?b6!=null&&b6.$==1?b4.$0[1]&&b5.$0[1]&&b6.$0[1]?x.MarkForever(b0,bT(b4.$0[0],b5.$0[0],b6.$0[0])):x.MarkReady(b0,bT(b4.$0[0],b5.$0[0],b6.$0[0])):void 0:void 0;}}bX=bU.s;bY=bV.s;bZ=bW.s;return bX!=null&&bX.$==0?bY!=null&&bY.$==0?bZ!=null&&bZ.$==0?x.New({$:0,$0:bT(bX.$0,bY.$0,bZ.$0)}):x.Map3Opt1(bT,bX.$0,bY.$0,bW):bZ!=null&&bZ.$==0?x.Map3Opt2(bT,bX.$0,bZ.$0,bV):x.Map3Opt3(bT,bX.$0,bV,bW):bY!=null&&bY.$==0?bZ!=null&&bZ.$==0?x.Map3Opt4(bT,bY.$0,bZ.$0,bU):x.Map3Opt5(bT,bY.$0,bU,bW):bZ!=null&&bZ.$==0?x.Map3Opt6(bT,bZ.$0,bU,bV):(b0=x.New({$:3,$0:[],$1:[]}),(x.When(bU,b1,b0),x.When(bV,b1,b0),x.When(bW,b1,b0),b0));};x.Sequence=function(bT){var bU,bV,bW;function bX(bY){var bZ;if(bW[0]===0){bZ=o.map(function(b0){var b1;b1=b0.s;return b1!=null&&b1.$==0?b1.$0:b1!=null&&b1.$==2?b1.$0:j.FailWith("value not found by View.Sequence");},bU);if(o.forall(function(b0){var b1;b1=b0.s;return b1!=null&&b1.$==0;},bU))x.MarkForever(bV,bZ);else x.MarkReady(bV,bZ);}else bW[0]--;}bU=o.ofSeq(bT);return bU.length==0?x.New({$:0,$0:[]}):(bV=x.New({$:3,$0:[],$1:[]}),(bW=[o.length(bU)-1],(o.iter(function(bY){x.When(bY,bX,bV);},bU),bV)));};x.Map2=function(bT,bU,bV){var bW,bX,bY;function bZ(b0){var b1,b2,b3;if(!(b1=bY.s,b1!=null&&b1.$==0||b1!=null&&b1.$==2)){b2=x.ValueAndForever(bU);b3=x.ValueAndForever(bV);if(b2!=null&&b2.$==1)b3!=null&&b3.$==1?b2.$0[1]&&b3.$0[1]?x.MarkForever(bY,bT(b2.$0[0],b3.$0[0])):x.MarkReady(bY,bT(b2.$0[0],b3.$0[0])):void 0;}}bW=bU.s;bX=bV.s;return bW!=null&&bW.$==0?bX!=null&&bX.$==0?x.New({$:0,$0:bT(bW.$0,bX.$0)}):x.Map2Opt1(bT,bW.$0,bV):bX!=null&&bX.$==0?x.Map2Opt2(bT,bX.$0,bU):(bY=x.New({$:3,$0:[],$1:[]}),(x.When(bU,bZ,bY),x.When(bV,bZ,bY),bY));};x.Copy=function(bT){var bU,bV,bW;bU=bT.s;return bU==null?bT:bU!=null&&bU.$==2?(bV=x.New({$:2,$0:bU.$0,$1:[]}),(x.WhenObsolete(bT,bV),bV)):bU!=null&&bU.$==3?(bW=x.New({$:3,$0:[],$1:[]}),(x.When(bT,function(bX){x.MarkDone(bW,bT,bX);},bW),bW)):bT;};x.Join=function(bT){var bU;bU=x.New({$:3,$0:[],$1:[]});x.When(bT,function(bV){var bW;bW=bV();x.When(bW,function(bX){var bY,bZ;if((bY=bW.s,bY!=null&&bY.$==0)&&(bZ=bT.s,bZ!=null&&bZ.$==0))x.MarkForever(bU,bX);else x.MarkReady(bU,bX);},bU);},bU);return bU;};x.Map3Opt1=function(bT,bU,bV,bW){return x.Map(function(bX){return bT(bU,bV,bX);},bW);};x.Map3Opt2=function(bT,bU,bV,bW){return x.Map(function(bX){return bT(bU,bX,bV);},bW);};x.Map3Opt3=function(bT,bU,bV,bW){return x.Map2(function(bX,bY){return bT(bU,bX,bY);},bV,bW);};x.Map3Opt4=function(bT,bU,bV,bW){return x.Map(function(bX){return bT(bX,bU,bV);},bW);};x.Map3Opt5=function(bT,bU,bV,bW){return x.Map2(function(bX,bY){return bT(bX,bU,bY);},bV,bW);};x.Map3Opt6=function(bT,bU,bV,bW){return x.Map2(function(bX,bY){return bT(bX,bY,bU);},bV,bW);};x.Map2Opt1=function(bT,bU,bV){return x.Map(function(bW){return bT(bU,bW);},bV);};x.Map2Opt2=function(bT,bU,bV){return x.Map(function(bW){return bT(bW,bU);},bV);};x.WhenObsolete=function(bT,bU){var bV;bV=bT.s;if(bV==null)x.Obsolete(bU);else bV!=null&&bV.$==2?x.EnqueueSafe(bV.$1,bU):bV!=null&&bV.$==3?x.EnqueueSafe(bV.$1,bU):void 0;};o.iter=function(bT,bU){var bV,bW;for(bV=0,bW=bU.length-1;bV<=bW;bV++)bT(bU[bV]);};o.tryFindIndex=function(bT,bU){var bV,bW;bV=null;bW=0;while(bW<bU.length&&bV==null){bT(bU[bW])?bV={$:1,$0:bW}:void 0;bW=bW+1;}return bV;};o.choose=function(bT,bU){var bV,bW,bX,bY;bV=[];for(bW=0,bX=bU.length-1;bW<=bX;bW++){bY=bT(bU[bW]);if(bY==null);else bV.push(bY.$0);}return bV;};o.ofList=function(bT){var bU,bV;bV=[];bU=bT;while(!(bU.$==0)){bV.push(W.head(bU));bU=W.tail(bU);}return bV;};o.ofSeq=function(bT){var bU,bV;if(bT instanceof a.Array)return bT.slice();else if(bT instanceof X)return o.ofList(bT);else{bU=[];bV=I.Get(bT);try{while(bV.MoveNext())bU.push(bV.Current());return bU;}finally{if(typeof bV=="object"&&"Dispose"in bV)bV.Dispose();}}};o.tryPick=function(bT,bU){var bV,bW,bX;bV=null;bW=0;while(bW<bU.length&&bV==null){bX=bT(bU[bW]);if(bX!=null&&bX.$==1)bV=bX;bW=bW+1;}return bV;};o.exists=function(bT,bU){var bV,bW,bX,bY;bV=false;bW=0;bY=o.length(bU);while(!bV&&bW<bY)if(bT(bU[bW]))bV=true;else bW=bW+1;return bV;};o.concat=function(bT){return a.Array.prototype.concat.apply([],o.ofSeq(bT));};o.filter=function(bT,bU){var bV,bW,bX;bV=[];for(bW=0,bX=bU.length-1;bW<=bX;bW++)if(bT(bU[bW]))bV.push(bU[bW]);return bV;};o.foldBack=function(bT,bU,bV){var bW,bX,bY,bZ,b0;bW=bV;bY=bU.length;for(bZ=1,b0=bY;bZ<=b0;bZ++)bW=bT(bU[bY-bZ],bW);return bW;};o.map=function(bT,bU){var bV,bW,bX;bV=new a.Array(bU.length);for(bW=0,bX=bU.length-1;bW<=bX;bW++)bV[bW]=bT(bU[bW]);return bV;};o.pick=function(bT,bU){var bV;bV=o.tryPick(bT,bU);return bV==null?j.FailWith("KeyNotFoundException"):bV.$0;};o.forall=function(bT,bU){var bV,bW,bX,bY;bV=true;bW=0;bY=o.length(bU);while(bV&&bW<bY)if(bT(bU[bW]))bW=bW+1;else bV=false;return bV;};o.create=function(bT,bU){var bV,bW,bX;bV=new a.Array(bT);for(bW=0,bX=bT-1;bW<=bX;bW++)bV[bW]=bU;return bV;};o.init=function(bT,bU){var bV,bW,bX;if(bT<0)j.FailWith("Negative size given.");else null;bV=new a.Array(bT);for(bW=0,bX=bT-1;bW<=bX;bW++)bV[bW]=bU(bW);return bV;};y.TryParseInt32=function(bT,bU){return y.TryParse(bT,-2147483648,2147483647,bU);};A.NewGuid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(new a.RegExp("[xy]","g"),function(bT){var bU,bV;bU=bR.random()*16|0;bV=bT=="x"?bU:bU&3|8;return bV.toString(16);});};C=B.List=bP.Class({GetEnumerator:function(){return I.Get(this);},GetEnumerator0:function(){return I.Get0(this);}},null,C);D.Trim=function(bT){return bT.replace(new a.RegExp("^\\s+"),"").replace(new a.RegExp("\\s+$"),"");};D.concat=function(bT,bU){return o.ofSeq(bU).join(bT);};D.SplitChars=function(bT,bU,bV){return D.Split(bT,new a.RegExp("["+D.RegexEscape(bU.join(""))+"]"),bV);};D.StartsWith=function(bT,bU){return bT.substring(0,bU.length)==bU;};D.Split=function(bT,bU,bV){return bV===1?o.filter(function(bW){return bW!=="";},D.SplitWith(bT,bU)):D.SplitWith(bT,bU);};D.RegexEscape=function(bT){return bT.replace(new a.RegExp("[-\\/\\\\^$*+?.()|[\\]{}]","g"),"\\$&");};D.SplitWith=function(bT,bU){return bT.split(bU);};D.forall=function(bT,bU){return u.forall(bT,D.protect(bU));};D.protect=function(bT){return bT===null?"":bT;};F.NewFromSeq=function(bT){var bU,bV,bW;bU={};bV=I.Get(bT);try{while(bV.MoveNext()){bW=bV.Current();bU[bW[0]]=bW[1];}}finally{if(typeof bV=="object"&&"Dispose"in bV)bV.Dispose();}return bU;};H.LoadLocalTemplates=function(bT){!H.LocalTemplatesLoaded()?(H.set_LocalTemplatesLoaded(true),H.LoadNestedTemplates(self.document.body,"")):void 0;H.LoadedTemplates().set_Item(bT,H.LoadedTemplateFile(""));};H.NamedTemplate=function(bT,bU,bV){var bW,bX;bW=(bX=null,[H.LoadedTemplateFile(bT).TryGetValue(bU==null?"":bU.$0,{get:function(){return bX;},set:function(bY){bX=bY;}}),bX]);return bW[0]?H.ChildrenTemplate(bW[1].cloneNode(true),bV):(bQ.warn("Local template doesn't exist",bU),v.get_Empty());};H.LocalTemplatesLoaded=function(){_2.$cctor();return _2.LocalTemplatesLoaded;};H.set_LocalTemplatesLoaded=function(bT){_2.$cctor();_2.LocalTemplatesLoaded=bT;};H.LoadNestedTemplates=function(bT,bU){var bW,bX,bY,bZ,b0,b1,b2,b3,b4,b5,b6,b7,b8;function bV(b9){var b_,b$;if(!bW.ContainsKey(b9)){b_=(b$=null,[bX.TryGetValue(b9,{get:function(){return b$;},set:function(ca){b$=ca;}}),b$]);if(b_[0]){b8.Add(b9);bX.Remove(b9);H.PrepareTemplateStrict(bU,{$:1,$0:b9},b_[1],{$:1,$0:bV});}else bQ.warn(b8.Contains(b9)?"Encountered loop when instantiating "+b9:"Local template does not exist: "+b9);}}bW=H.LoadedTemplateFile(bU);bX=new P.New$5();bY=bT.querySelectorAll("[ws-template]");for(bZ=0,b0=bY.length-1;bZ<=b0;bZ++){b1=bY[bZ];b2=b1.getAttribute("ws-template").toLowerCase();b1.removeAttribute("ws-template");bX.set_Item(b2,H.FakeRootSingle(b1));}b3=bT.querySelectorAll("[ws-children-template]");for(b4=0,b5=b3.length-1;b4<=b5;b4++){b6=b3[b4];b7=b6.getAttribute("ws-children-template").toLowerCase();b6.removeAttribute("ws-children-template");bX.set_Item(b7,H.FakeRoot(b6));}b8=new R.New$3();while(bX.count>0)bV(u.head(bX.get_Keys()));};H.LoadedTemplates=function(){_2.$cctor();return _2.LoadedTemplates;};H.LoadedTemplateFile=function(bT){var bU,bV,bW;bU=(bV=null,[H.LoadedTemplates().TryGetValue(bT,{get:function(){return bV;},set:function(bX){bV=bX;}}),bV]);return bU[0]?bU[1]:(bW=new P.New$5(),(H.LoadedTemplates().set_Item(bT,bW),bW));};H.ChildrenTemplate=function(bT,bU){var bV,bW,bX,bY,bZ;bV=H.InlineTemplate(bT,u.append(bU,H.GlobalHoles().get_Values()));bW=bV[1];bX=bV[0];bY=bX.Els;return!s.Equals(bY,null)&&bY.length===1&&(o.get(bY,0)instanceof U&&(s.Equals(o.get(bY,0).nodeType,U.ELEMENT_NODE)&&(bZ=o.get(bY,0),true)))?_8.TreeNode(bX,bW):v.Mk({$:6,$0:bX},bW);};H.FakeRootSingle=function(bT){var bU,bV,bW,bX;bT.removeAttribute("ws-template");bU=bT.getAttribute("ws-replace");if(bU===null);else{bT.removeAttribute("ws-replace");bV=bT.parentNode;s.Equals(bV,null)?void 0:(bW=self.document.createElement(bT.tagName),bW.setAttribute("ws-replace",bU),bV.replaceChild(bW,bT));}bX=self.document.createElement("div");bX.appendChild(bT);return bX;};H.FakeRoot=function(bT){var bU;bU=self.document.createElement("div");while(bT.hasChildNodes())bU.appendChild(bT.firstChild);return bU;};H.PrepareTemplateStrict=function(bT,bU,bV,bW){var bX;function bY(b4,b5){var b6,b7,b8,b9,b_,ca,cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn,co,cp,cq,cr,cs,ct,cu;function b$(cv){}while(true)switch(b4){case 0:if(b5!==null){b6=b5.nextSibling;if(s.Equals(b5.nodeType,U.TEXT_NODE))_9.convertTextNode(b5);else if(s.Equals(b5.nodeType,U.ELEMENT_NODE))b0(b5);b5=b6;}else return null;break;case 1:ca=_.string(b5.nodeName,{$:1,$0:3},null).toLowerCase();cb=(b7=ca.indexOf("."),b7===-1?[bT,ca]:[_.string(ca,null,{$:1,$0:b7-1}),_.string(ca,{$:1,$0:b7+1},null)]);cc=cb[1];cd=cb[0];if(cd!==""&&!H.LoadedTemplates().ContainsKey(cd))return _9.failNotLoaded(cc);else{if(cd===""&&bW!=null)bW.$0(cc);ce=H.LoadedTemplates().get_Item(cd);if(!ce.ContainsKey(cc))return _9.failNotLoaded(cc);else{cf=ce.get_Item(cc);cg=cf.cloneNode(true);ch=new R.New$3();ci=new P.New$5();cj=b5.attributes;for(ck=0,cl=cj.length-1;ck<=cl;ck++){cm=cj.item(ck).name.toLowerCase();ci.set_Item(cm,(cn=cj.item(ck).nodeValue,cn===""?cm:cn.toLowerCase()));if(!ch.Add(cm))bQ.warn("Hole mapped twice",cm);}for(co=0,cp=b5.childNodes.length-1;co<=cp;co++){cq=b5.childNodes[co];if(s.Equals(cq.nodeType,U.ELEMENT_NODE))!ch.Add(cq.nodeName.toLowerCase())?bQ.warn("Hole filled twice",cc):void 0;}cr=b5.childNodes.length===1&&s.Equals(b5.firstChild.nodeType,U.TEXT_NODE);if(cr){b9=_9.fillTextHole(cg,b5.firstChild.textContent,cc);((function(cv){return function(cw){if(cw!=null)cv(cw.$0);};}((b_=function(cv){return function(cw){return cv.Add(cw);};}(ch),function(cv){return b$(b_(cv));})))(b9));}_9.removeHolesExcept(cg,ch);if(!cr){for(cs=0,ct=b5.childNodes.length-1;cs<=ct;cs++){cu=b5.childNodes[cs];if(s.Equals(cu.nodeType,U.ELEMENT_NODE))cu.hasAttributes()?_9.fillInstanceAttrs(cg,cu):bZ(cg,cu);}}_9.mapHoles(cg,ci);_9.fill(cg,b5.parentNode,b5);b5.parentNode.removeChild(b5);return;}}break;}}function bZ(b4,b5){var b6,b8,b9;function b7(b_,b$){var ca;if(b8==="title"&&b5.hasChildNodes()){ca=$.ParseHTMLIntoFakeRoot(b5.textContent);b5.removeChild(b5.firstChild);while(ca.hasChildNodes())b5.appendChild(ca.firstChild);}else null;b0(b5);return _9.fill(b5,b_,b$);}b8=b5.nodeName.toLowerCase();H.foreachNotPreserved(b4,"[ws-attr-holes]",function(b_){var b$,ca,cb,cc,cd;b$=D.SplitChars(b_.getAttribute("ws-attr-holes"),[" "],1);for(ca=0,cb=b$.length-1;ca<=cb;ca++){cc=o.get(b$,ca);b_.setAttribute(cc,(cd=new a.RegExp("\\${"+b8+"}","ig"),b_.getAttribute(cc).replace(cd,b5.textContent)));}});b9=b4.querySelector("[ws-hole="+b8+"]");if(s.Equals(b9,null)){b6=b4.querySelector("[ws-replace="+b8+"]");return s.Equals(b6,null)?null:(b7(b6.parentNode,b6),void b6.parentNode.removeChild(b6));}else{while(b9.hasChildNodes())b9.removeChild(b9.lastChild);b9.removeAttribute("ws-hole");return b7(b9,null);}}function b0(b4){if(!b4.hasAttribute("ws-preserve"))if(D.StartsWith(b4.nodeName.toLowerCase(),"ws-"))b2(b4);else{_9.convertAttrs(b4);b1(b4.firstChild);}}function b1(b4){return bY(0,b4);}function b2(b4){return bY(1,b4);}function b3(b4){var b5,b6,b7,b8;while(true){b5=b4.querySelector("[ws-template]");if(s.Equals(b5,null)){b6=b4.querySelector("[ws-children-template]");if(s.Equals(b6,null))return null;else{b7=b6.getAttribute("ws-children-template");b6.removeAttribute("ws-children-template");H.PrepareTemplateStrict(bT,{$:1,$0:b7},b6,null);b4=b4;}}else{b8=b5.getAttribute("ws-template");(H.PrepareSingleTemplate(bT,{$:1,$0:b8},b5))(null);b4=b4;}}}bX=(bU==null?"":bU.$0).toLowerCase();H.LoadedTemplateFile(bT).set_Item(bX,bV);if(bV.hasChildNodes()){b3(bV);b1(bV.firstChild);}};H.InlineTemplate=function(bT,bU){var bV,bW,bX,bY,b1,b2,b3,b4,b5,b6,b7;function bZ(b8,b9){var b_,b$,ca;b_=bg.Insert(b8,b9);b2.push(bg.Updates(b_));b3.push([b8,b_]);b$=bP.GetOptional(b_.OnAfterRender);return b$==null?null:(ca=b$.$0,void b4.push(function(){ca(b8);}));}function b0(b8){var b9,b_;b9=(b_=null,[b5.TryGetValue(b8,{get:function(){return b_;},set:function(b$){b_=b$;}}),b_]);return b9[0]?b9[1].$==0?{$:1,$0:b9[1].$1}:b9[1].$==1?{$:1,$0:v.TextNode(b9[1].$1)}:b9[1].$==2?{$:1,$0:v.TextView(b9[1].$1)}:b9[1].$==8?{$:1,$0:v.TextView(b9[1].$1.get_View())}:b9[1].$==9?{$:1,$0:v.TextView(O.Map(a.String,b9[1].$1.get_View()))}:b9[1].$==10?{$:1,$0:v.TextView(O.Map(function(b$){return b$.get_Input();},b9[1].$1.get_View()))}:b9[1].$==11?{$:1,$0:v.TextView(O.Map(a.String,b9[1].$1.get_View()))}:b9[1].$==12?{$:1,$0:v.TextView(O.Map(function(b$){return b$.get_Input();},b9[1].$1.get_View()))}:b9[1].$==13?{$:1,$0:v.TextView(O.Map(a.String,b9[1].$1.get_View()))}:(bQ.warn("Content hole filled with attribute data",b8),null):null;}b1=[];b2=[];b3=[];b4=[];b5=new P.New$5();b6=I.Get(bU);try{while(b6.MoveNext()){b7=b6.Current();b5.set_Item(b7.$0,b7);}}finally{if(typeof b6=="object"&&"Dispose"in b6)b6.Dispose();}bV=$.ChildrenArray(bT);H.foreachNotPreserved(bT,"[ws-hole]",function(b8){var b9,b_,b$;b$=b8.getAttribute("ws-hole");b8.removeAttribute("ws-hole");while(b8.hasChildNodes())b8.removeChild(b8.lastChild);b9=b0(b$);if(b9!=null&&b9.$==1){b_=b9.$0;_4.LinkElement(b8,b_.docNode);b1.push(_5.New(bg.Empty(b8),b_.docNode,null,b8,M.Int(),null));b2.push(b_.updates);}});H.foreachNotPreserved(bT,"[ws-replace]",function(b8){var b9,b_,b$,ca,cb,cc;b9=b0(b8.getAttribute("ws-replace"));if(b9!=null&&b9.$==1){b_=b9.$0;b$=b8.parentNode;ca=self.document.createTextNode("");b$.replaceChild(ca,b8);cb=_4.InsertBeforeDelim(ca,b_.docNode);cc=o.tryFindIndex(function(cd){return b8===cd;},bV);cc==null?void 0:o.set(bV,cc.$0,b_.docNode);b1.push(_5.New(bg.Empty(b$),b_.docNode,{$:1,$0:[cb,ca]},b$,M.Int(),null));b2.push(b_.updates);}});H.foreachNotPreserved(bT,"[ws-attr]",function(b8){var b9,b_,b$;b9=b8.getAttribute("ws-attr");b8.removeAttribute("ws-attr");b_=(b$=null,[b5.TryGetValue(b9,{get:function(){return b$;},set:function(ca){b$=ca;}}),b$]);if(b_[0])b_[1].$==3?bZ(b8,b_[1].$1):bQ.warn("Attribute hole filled with non-attribute data",b9);});H.foreachNotPreserved(bT,"[ws-on]",function(b8){bZ(b8,Y.Concat(o.choose(function(b9){var b_,b$,ca;b_=D.SplitChars(b9,[":"],1);b$=(ca=null,[b5.TryGetValue(o.get(b_,1),{get:function(){return ca;},set:function(cb){ca=cb;}}),ca]);return b$[0]?b$[1].$==4?{$:1,$0:bh.Handler(o.get(b_,0),b$[1].$1)}:b$[1].$==5?{$:1,$0:Y.Handler(o.get(b_,0),b$[1].$1)}:(bQ.warn("Event hole on"+o.get(b_,0)+" filled with non-event data",o.get(b_,1)),null):null;},D.SplitChars(b8.getAttribute("ws-on"),[" "],1))));b8.removeAttribute("ws-on");});H.foreachNotPreserved(bT,"[ws-onafterrender]",function(b8){var b9,b_,b$;b9=b8.getAttribute("ws-onafterrender");b_=(b$=null,[b5.TryGetValue(b9,{get:function(){return b$;},set:function(ca){b$=ca;}}),b$]);if(b_[0])b_[1].$==6?(b8.removeAttribute("ws-onafterrender"),bZ(b8,bh.OnAfterRender(b_[1].$1))):b_[1].$==7?(b8.removeAttribute("ws-onafterrender"),bZ(b8,bh.OnAfterRender(b_[1].$1))):bQ.warn("onafterrender hole filled with non-onafterrender data",b9);});H.foreachNotPreserved(bT,"[ws-var]",function(b8){var b9,b_,b$;b9=b8.getAttribute("ws-var");b8.removeAttribute("ws-var");b_=(b$=null,[b5.TryGetValue(b9,{get:function(){return b$;},set:function(ca){b$=ca;}}),b$]);if(b_[0])b_[1].$==8?bZ(b8,bh.Value(b_[1].$1)):b_[1].$==9?bZ(b8,bh.Checked(b_[1].$1)):b_[1].$==10?bZ(b8,bh.IntValue(b_[1].$1)):b_[1].$==11?bZ(b8,bh.IntValueUnchecked(b_[1].$1)):b_[1].$==12?bZ(b8,bh.FloatValue(b_[1].$1)):b_[1].$==13?bZ(b8,bh.FloatValueUnchecked(b_[1].$1)):bQ.warn("Var hole filled with non-Var data",b9);});H.foreachNotPreserved(bT,"[ws-attr-holes]",function(b8){var b9,b_,b$,ca;b9=new a.RegExp(H.TextHoleRE(),"g");b_=D.SplitChars(b8.getAttribute("ws-attr-holes"),[" "],1);b8.removeAttribute("ws-attr-holes");for(b$=0,ca=b_.length-1;b$<=ca;b$++)(function(){var cb,cc,cd,ce,cf,cg,ch,ci,cj,ck,cl,cm,cn;ck=o.get(b_,b$);cl=b8.getAttribute(ck);cb=null;cc=0;cm=[];while(cb=b9.exec(cl),cb!==null){cn=_.string(cl,{$:1,$0:cc},{$:1,$0:b9.lastIndex-o.get(cb,0).length-1});cc=b9.lastIndex;cm.push([cn,o.get(cb,1)]);}ce=_.string(cl,{$:1,$0:cc},null);b9.lastIndex=0;cf=o.foldBack(function(co,cp){return(function(cq){var cr,cs;cr=cq[0];cs=cq[1];return function(ct){var cu,cv,cw,cx,cy;cu=ct[0];cv=ct[1];cw=(cx=(cy=null,[b5.TryGetValue(cs,{get:function(){return cy;},set:function(cz){cy=cz;}}),cy]),cx[0]?cx[1].$==1?{$:0,$0:cx[1].$1}:cx[1].$==2?{$:1,$0:cx[1].$1}:cx[1].$==8?{$:1,$0:cx[1].$1.get_View()}:cx[1].$==9?{$:1,$0:O.Map(a.String,cx[1].$1.get_View())}:cx[1].$==10?{$:1,$0:O.Map(function(cz){return cz.get_Input();},cx[1].$1.get_View())}:cx[1].$==11?{$:1,$0:O.Map(a.String,cx[1].$1.get_View())}:cx[1].$==12?{$:1,$0:O.Map(function(cz){return cz.get_Input();},cx[1].$1.get_View())}:cx[1].$==13?{$:1,$0:O.Map(a.String,cx[1].$1.get_View())}:(bQ.warn("Attribute value hole filled with non-text data",cs),{$:0,$0:""}):{$:0,$0:""});return cw.$==1?[cr,new X({$:1,$0:cu===""?cw.$0:O.Map(function(cz){return cz+cu;},cw.$0),$1:cv})]:[cr+cw.$0+cu,cv];};}(co))(cp);},cm,[ce,X.Empty]);return bZ(b8,cf[1].$==1?cf[1].$1.$==1?cf[1].$1.$1.$==1?cf[1].$1.$1.$1.$==0?(cg=cf[0],bh.Dynamic(ck,O.Map3(function(co,cp,cq){return cg+co+cp+cq;},cf[1].$0,cf[1].$1.$0,cf[1].$1.$1.$0))):(ch=cf[0],bh.Dynamic(ck,O.Map(function(co){return ch+D.concat("",co);},O.Sequence(cf[1])))):(ci=cf[0],bh.Dynamic(ck,O.Map2(function(co,cp){return ci+co+cp;},cf[1].$0,cf[1].$1.$0))):cf[0]===""?bh.Dynamic(ck,cf[1].$0):(cj=cf[0],bh.Dynamic(ck,O.Map(function(co){return cj+co;},cf[1].$0))):Y.Create(ck,cf[0]));}());});return[bP.DeleteEmptyFields({Els:bV,Dirty:true,Holes:b1,Attrs:b3,Render:(bW=b4.length==0?null:{$:1,$0:function(b8){o.iter(function(b9){b9(b8);},b4);}},bW?bW.$0:void 0),El:(bX=!s.Equals(bV,null)&&bV.length===1&&(o.get(bV,0)instanceof U&&(o.get(bV,0)instanceof a.Element&&(bY=o.get(bV,0),true)))?{$:1,$0:bY}:null,bX?bX.$0:void 0)},["Render","El"]),K.TreeReduce(O.Const(),O.Map2Unit,b2)];};H.GlobalHoles=function(){_2.$cctor();return _2.GlobalHoles;};H.foreachNotPreserved=function(bT,bU,bV){$.IterSelector(bT,bU,function(bW){if(bW.closest("[ws-preserve]")==null)bV(bW);});};H.PrepareSingleTemplate=function(bT,bU,bV){var bW;bW=H.FakeRootSingle(bV);return function(bX){H.PrepareTemplateStrict(bT,bU,bW,bX);};};H.TextHoleRE=function(){_2.$cctor();return _2.TextHoleRE;};I.Get=function(bT){return bT instanceof a.Array?I.ArrayEnumerator(bT):s.Equals(typeof bT,"string")?I.StringEnumerator(bT):bT.GetEnumerator();};I.ArrayEnumerator=function(bT){return new J.New(0,null,function(bU){var bV;bV=bU.s;return bV<o.length(bT)&&(bU.c=o.get(bT,bV),bU.s=bV+1,true);},void 0);};I.StringEnumerator=function(bT){return new J.New(0,null,function(bU){var bV;bV=bU.s;return bV<bT.length&&(bU.c=bT[bV],bU.s=bV+1,true);},void 0);};I.Get0=function(bT){return bT instanceof a.Array?I.ArrayEnumerator(bT):s.Equals(typeof bT,"string")?I.StringEnumerator(bT):"GetEnumerator0"in bT?bT.GetEnumerator0():bT.GetEnumerator();};J=I.T=bP.Class({Dispose:function(){if(this.d)this.d(this);},MoveNext:function(){return this.n(this);},Current:function(){return this.c;}},e,J);J.New=bP.Ctor(function(bT,bU,bV,bW){e.New.call(this);this.s=bT;this.c=bU;this.n=bV;this.d=bW;},J);K.ofSeqNonCopying=function(bT){var bU,bV;if(bT instanceof a.Array)return bT;else if(bT instanceof X)return o.ofList(bT);else if(bT===null)return[];else{bU=[];bV=I.Get(bT);try{while(bV.MoveNext())bU.push(bV.Current());return bU;}finally{if(typeof bV=="object"&&"Dispose"in bV)bV.Dispose();}}};K.TreeReduce=function(bT,bU,bV){var bW;function bX(bY){return function(bZ){var b0,b1;return bZ<=0?bT:bZ===1&&(bY>=0&&bY<bW)?o.get(bV,bY):(b1=bZ/2>>0,bU((bX(bY))(b1),(bX(bY+b1))(bZ-b1)));};}bW=o.length(bV);return(bX(0))(bW);};K.MapTreeReduce=function(bT,bU,bV,bW){var bX;function bY(bZ){return function(b0){var b1,b2;return b0<=0?bU:b0===1&&(bZ>=0&&bZ<bX)?bT(o.get(bW,bZ)):(b2=b0/2>>0,bV((bY(bZ))(b2),(bY(bZ+b2))(b0-b2)));};}bX=o.length(bW);return(bY(0))(bX);};M.Int=function(){M.set_counter(M.counter()+1);return M.counter();};M.set_counter=function(bT){_7.$cctor();_7.counter=bT;};M.counter=function(){_7.$cctor();return _7.counter;};N.InMemory=function(bT){return new _0.New(bT);};O=f.View=bP.Class({},null,O);P=B.Dictionary=bP.Class({Clear:function(){this.data=[];this.count=0;},set_Item:function(bT,bU){this.set(bT,bU);},TryGetValue:function(bT,bU){var bV,bW,bX;bV=this;bW=this.data[this.hash(bT)];return bW==null?false:(bX=o.tryPick(function(bY){var bZ;bZ=j.KeyValue(bY);return bV.equals.apply(null,[bZ[0],bT])?{$:1,$0:bZ[1]}:null;},bW),bX!=null&&bX.$==1&&(bU.set(bX.$0),true));},Remove:function(bT){return this.remove(bT);},set:function(bT,bU){var bV,bW,bX,bY;bV=this;bW=this.hash(bT);bX=this.data[bW];if(bX==null){this.count=this.count+1;this.data[bW]=new a.Array({K:bT,V:bU});}else{bY=o.tryFindIndex(function(bZ){return bV.equals.apply(null,[(j.KeyValue(bZ))[0],bT]);},bX);bY==null?(this.count=this.count+1,bX.push({K:bT,V:bU})):bX[bY.$0]={K:bT,V:bU};}},ContainsKey:function(bT){var bU,bV;bU=this;bV=this.data[this.hash(bT)];return bV==null?false:o.exists(function(bW){return bU.equals.apply(null,[(j.KeyValue(bW))[0],bT]);},bV);},get_Keys:function(){return new ba.New(this);},remove:function(bT){var bU,bV,bW,bX;bU=this;bV=this.hash(bT);bW=this.data[bV];return bW==null?false:(bX=o.filter(function(bY){return!bU.equals.apply(null,[(j.KeyValue(bY))[0],bT]);},bW),o.length(bX)<bW.length&&(this.count=this.count-1,this.data[bV]=bX,true));},get_Values:function(){return new bj.New(this);},get_Item:function(bT){return this.get(bT);},get:function(bT){var bU,bV;bU=this;bV=this.data[this.hash(bT)];return bV==null?_1.notPresent():o.pick(function(bW){var bX;bX=j.KeyValue(bW);return bU.equals.apply(null,[bX[0],bT])?{$:1,$0:bX[1]}:null;},bV);},GetEnumerator:function(){return I.Get0(this);},GetEnumerator0:function(){return I.Get0(o.concat(V.GetFieldValues(this.data)));}},e,P);P.New$5=bP.Ctor(function(){P.New$6.call(this,[],s.Equals,s.Hash);},P);P.New$6=bP.Ctor(function(bT,bU,bV){var bW,bX;e.New.call(this);this.equals=bU;this.hash=bV;this.count=0;this.data=[];bW=I.Get(bT);try{while(bW.MoveNext()){bX=bW.Current();this.set(bX.K,bX.V);}}finally{if(typeof bW=="object"&&"Dispose"in bW)bW.Dispose();}},P);x.Obsolete=function(bT){var bU,bV,bW,bX,bY;bV=bT.s;if(bV==null||(bV!=null&&bV.$==2?(bU=bV.$1,false):bV!=null&&bV.$==3?(bU=bV.$1,false):true))void 0;else{bT.s=null;for(bW=0,bX=o.length(bU)-1;bW<=bX;bW++){bY=o.get(bU,bW);if(typeof bY=="object")(function(bZ){x.Obsolete(bZ);}(bY));else bY();}}};x.New=function(bT){return{s:bT};};R=B.HashSet=bP.Class({Add:function(bT){return this.add(bT);},Contains:function(bT){var bU;bU=this.data[this.hash(bT)];return bU==null?false:this.arrContains(bT,bU);},add:function(bT){var bU,bV;bU=this.hash(bT);bV=this.data[bU];return bV==null?(this.data[bU]=[bT],this.count=this.count+1,true):this.arrContains(bT,bV)?false:(bV.push(bT),this.count=this.count+1,true);},arrContains:function(bT,bU){var bV,bW,bX,bY;bV=true;bW=0;bY=bU.length;while(bV&&bW<bY)if(this.equals.apply(null,[bU[bW],bT]))bV=false;else bW=bW+1;return!bV;},ExceptWith:function(bT){var bU;bU=I.Get(bT);try{while(bU.MoveNext())this.Remove(bU.Current());}finally{if(typeof bU=="object"&&"Dispose"in bU)bU.Dispose();}},get_Count:function(){return this.count;},CopyTo:function(bT){var bU,bV,bW,bX;bU=0;bV=bq.concat(this.data);for(bW=0,bX=bV.length-1;bW<=bX;bW++)o.set(bT,bW,bV[bW]);},IntersectWith:function(bT){var bU,bV,bW,bX,bY;bU=new R.New$4(bT,this.equals,this.hash);bV=bq.concat(this.data);for(bW=0,bX=bV.length-1;bW<=bX;bW++){bY=bV[bW];if(!bU.Contains(bY))this.Remove(bY);}},Remove:function(bT){var bU;bU=this.data[this.hash(bT)];return bU==null?false:this.arrRemove(bT,bU)&&(this.count=this.count-1,true);},arrRemove:function(bT,bU){var bV,bW,bX,bY;bV=true;bW=0;bY=bU.length;while(bV&&bW<bY)if(this.equals.apply(null,[bU[bW],bT])){bU.splice.apply(bU,[bW,1]);bV=false;}else bW=bW+1;return!bV;},GetEnumerator:function(){return I.Get(bq.concat(this.data));},GetEnumerator0:function(){return I.Get(bq.concat(this.data));}},e,R);R.New$3=bP.Ctor(function(){R.New$4.call(this,[],s.Equals,s.Hash);},R);R.New$4=bP.Ctor(function(bT,bU,bV){var bW;e.New.call(this);this.equals=bU;this.hash=bV;this.data=[];this.count=0;bW=I.Get(bT);try{while(bW.MoveNext())this.add(bW.Current());}finally{if(typeof bW=="object"&&"Dispose"in bW)bW.Dispose();}},R);R.New$2=bP.Ctor(function(bT){R.New$4.call(this,bT,s.Equals,s.Hash);},R);S.$cctor=function(){S.$cctor=a.ignore;S.initialized=new P.New$5();};S=m.TemplateInitializer=bP.Class({},e,S);S.GetOrAddHoleFor=function(bT,bU,bV){var bW,bX,bY,bZ;S.$cctor();bW=S.GetHolesFor(bT);bX=(bY=null,[bW.TryGetValue(bU,{get:function(){return bY;},set:function(b0){bY=b0;}}),bY]);return bX[0]?bX[1]:(bZ=bV(),(bW.set_Item(bU,bZ),bZ));};S.GetHolesFor=function(bT){var bU,bV,bW;S.$cctor();bU=(bV=null,[S.initialized.TryGetValue(bT,{get:function(){return bV;},set:function(bX){bV=bX;}}),bV]);return bU[0]?bU[1]:(bW=new P.New$5(),(S.initialized.set_Item(bT,bW),bW));};V.GetFieldValues=function(bT){var bU,bV;bU=[];for(var bW in bT)bU.push(bT[bW]);return bU;};X=W.T=bP.Class({GetEnumerator:function(){return new J.New(this,null,function(bT){var bU;bU=bT.s;return bU.$==0?false:(bT.c=bU.$0,bT.s=bU.$1,true);},void 0);},GetEnumerator0:function(){return I.Get(this);}},null,X);X.Empty=new X({$:0});O.Map2Unit=function(bT,bU){return O.CreateLazy(function(){return x.Map2Unit(bT(),bU());});};O.Const=function(bT){var bU;bU=x.New({$:0,$0:bT});return function(){return bU;};};O.Map=function(bT,bU){return O.CreateLazy(function(){return x.Map(bT,bU());});};O.CreateLazy=function(bT){var bU;bU={c:null,o:bT};return function(){var bV,bW;bV=bU.c;return bV===null?(bV=bU.o(),bU.c=bV,(bW=bV.s,bW!=null&&bW.$==0)?bU.o=null:x.WhenObsoleteRun(bV,function(){bU.c=null;}),bV):bV;};};O.Sink=function(bT,bU){function bV(){x.WhenRun(bU(),bT,function(){bn.scheduler().Fork(bV);});}bn.scheduler().Fork(bV);};O.Bind=function(bT,bU){return O.Join(O.Map(bT,bU));};O.Map3=function(bT,bU,bV,bW){return O.CreateLazy(function(){return x.Map3(bT,bU(),bV(),bW());});};O.Sequence=function(bT){return O.CreateLazy(function(){return x.Sequence(u.map(function(bU){return bU();},bT));});};O.Map2=function(bT,bU,bV){return O.CreateLazy(function(){return x.Map2(bT,bU(),bV());});};O.Join=function(bT){return O.CreateLazy(function(){return x.Join(bT());});};Y=f.AttrProxy=bP.Class({},null,Y);Y.Handler=function(bT,bU){return Y.HandlerImpl(bT,bU);};Y.Concat=function(bT){var bU;bU=K.ofSeqNonCopying(bT);return K.TreeReduce(bg.EmptyAttr(),Y.Append,bU);};Y.Create=function(bT,bU){return bg.Static(function(bV){bV.setAttribute(bT,bU);});};Y.HandlerImpl=function(bT,bU){return bg.Static(function(bV){bV.addEventListener(bT,function(bW){return(bU(bV))(bW);},false);});};Y.Append=function(bT,bU){return bg.AppendTree(bT,bU);};Z=f.CheckedInput=bP.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}},null,Z);_0=N.ArrayStorage=bP.Class({SSet:function(bT){return o.ofSeq(bT);},SSetAt:function(bT,bU,bV){o.set(bV,bT,bU);return bV;},SAppend:function(bT,bU){bU.push(bT);return bU;},SInit:function(){return this.init;}},e,_0);_0.New=bP.Ctor(function(bT){e.New.call(this);this.init=bT;},_0);_1.notPresent=function(){return j.FailWith("The given key was not present in the dictionary.");};_2.$cctor=function(){_2.$cctor=a.ignore;_2.LoadedTemplates=new P.New$5();_2.LocalTemplatesLoaded=false;_2.GlobalHoles=new P.New$5();_2.TextHoleRE="\\${([^}]+)}";_2.RenderedFullDocTemplate=null;};_4.LinkElement=function(bT,bU){_4.InsertDoc(bT,bU,null);};_4.InsertDoc=function(bT,bU,bV){var bW,bX,bY;while(true)if(bU!=null&&bU.$==1)return _4.InsertNode(bT,bU.$0.El,bV);else if(bU!=null&&bU.$==2){bW=bU.$0;bW.Dirty=false;bU=bW.Current;}else if(bU==null)return bV;else if(bU!=null&&bU.$==4)return _4.InsertNode(bT,bU.$0.Text,bV);else if(bU!=null&&bU.$==5)return _4.InsertNode(bT,bU.$0,bV);else if(bU!=null&&bU.$==6)return o.foldBack(function(bZ,b0){return(((bP.Curried3(function(b1,b2,b3){return b2==null||b2.constructor===Q?_4.InsertDoc(b1,b2,b3):_4.InsertNode(b1,b2,b3);}))(bT))(bZ))(b0);},bU.$0.Els,bV);else{bX=bU.$1;bY=bU.$0;bU=bY;bV=_4.InsertDoc(bT,bX,bV);}};_4.CreateRunState=function(bT,bU){return bl.New(bm.get_Empty(),_4.CreateElemNode(bT,bg.EmptyAttr(),bU));};_4.PerformAnimatedUpdate=function(bT,bU,bV){var bW;return bb.get_UseAnimations()?(bW=null,bn.Delay(function(){var bX,bY,bZ;bX=bm.FindAll(bV);bY=_4.ComputeChangeAnim(bU,bX);bZ=_4.ComputeEnterAnim(bU,bX);return bn.Bind(bb.Play(bb.Append(bY,_4.ComputeExitAnim(bU,bX))),function(){return bn.Bind(_4.SyncElemNodesNextFrame(bT,bU),function(){return bn.Bind(bb.Play(bZ),function(){bU.PreviousNodes=bX;return bn.Return(null);});});});})):_4.SyncElemNodesNextFrame(bT,bU);};_4.PerformSyncUpdate=function(bT,bU,bV){var bW;bW=bm.FindAll(bV);_4.SyncElemNode(bT,bU.Top);bU.PreviousNodes=bW;};_4.CreateEmbedNode=function(){return{Current:null,Dirty:false};};_4.UpdateEmbedNode=function(bT,bU){bT.Current=bU;bT.Dirty=true;};_4.InsertBeforeDelim=function(bT,bU){var bV,bW;bV=bT.parentNode;bW=self.document.createTextNode("");bV.insertBefore(bW,bT);_4.LinkPrevElement(bT,bU);return bW;};_4.InsertNode=function(bT,bU,bV){$.InsertAt(bT,bV,bU);return bU;};_4.CreateElemNode=function(bT,bU,bV){var bW;_4.LinkElement(bT,bV);bW=bg.Insert(bT,bU);return _5.New(bW,bV,null,bT,M.Int(),bP.GetOptional(bW.OnAfterRender));};_4.SyncElemNodesNextFrame=function(bT,bU){function bV(bW){a.requestAnimationFrame(function(){_4.SyncElemNode(bT,bU.Top);bW();});}return bc.BatchUpdatesEnabled()?bn.FromContinuations(function(bW,bX,bY){return bV.apply(null,[bW,bX,bY]);}):(_4.SyncElemNode(bT,bU.Top),bn.Return(null));};_4.ComputeExitAnim=function(bT,bU){return bb.Concat(o.map(function(bV){return bg.GetExitAnim(bV.Attr);},bm.ToArray(bm.Except(bU,bm.Filter(function(bV){return bg.HasExitAnim(bV.Attr);},bT.PreviousNodes)))));};_4.ComputeEnterAnim=function(bT,bU){return bb.Concat(o.map(function(bV){return bg.GetEnterAnim(bV.Attr);},bm.ToArray(bm.Except(bT.PreviousNodes,bm.Filter(function(bV){return bg.HasEnterAnim(bV.Attr);},bU)))));};_4.ComputeChangeAnim=function(bT,bU){var bV;function bW(bX){return bg.HasChangeAnim(bX.Attr);}bV=function(bX){return bm.Filter(bW,bX);};return bb.Concat(o.map(function(bX){return bg.GetChangeAnim(bX.Attr);},bm.ToArray(bm.Intersect(bV(bT.PreviousNodes),bV(bU)))));};_4.SyncElemNode=function(bT,bU){!bT?_4.SyncElement(bU):void 0;_4.Sync(bU.Children);_4.AfterRender(bU);};_4.CreateTextNode=function(){return{Text:self.document.createTextNode(""),Dirty:false,Value:""};};_4.UpdateTextNode=function(bT,bU){bT.Value=bU;bT.Dirty=true;};_4.LinkPrevElement=function(bT,bU){_4.InsertDoc(bT.parentNode,bU,bT);};_4.SyncElement=function(bT){function bU(bV){function bW(bX){var bY,bZ,b0,b1;while(true){if(bX!=null&&bX.$==0){bZ=bX.$1;b0=bX.$0;if(bW(b0))return true;else bX=bZ;}else if(bX!=null&&bX.$==2){b1=bX.$0;if(b1.Dirty)return true;else bX=b1.Current;}else return bX!=null&&bX.$==6&&(bY=bX.$0,bY.Dirty||o.exists(bU,bY.Holes));}}return bW(bV.Children);}bg.Sync(bT.El,bT.Attr);if(bU(bT))_4.DoSyncElement(bT);};_4.Sync=function(bT){var bU,bV,bW,bX,bY;while(true){if(bT!=null&&bT.$==1)return _4.SyncElemNode(false,bT.$0);else if(bT!=null&&bT.$==2){bW=bT.$0;bT=bW.Current;}else if(bT==null)return null;else if(bT!=null&&bT.$==5)return null;else if(bT!=null&&bT.$==4){bU=bT.$0;return bU.Dirty?(bU.Text.nodeValue=bU.Value,bU.Dirty=false):null;}else if(bT!=null&&bT.$==6){bV=bT.$0;o.iter(function(bZ){return function(b0){_4.SyncElemNode(bZ,b0);};}(false),bV.Holes);o.iter(function(bZ){bg.Sync(bZ[0],bZ[1]);},bV.Attrs);return _4.AfterRender(bV);}else{bX=bT.$1;bY=bT.$0;_4.Sync(bY);bT=bX;}}};_4.AfterRender=function(bT){var bU;bU=bP.GetOptional(bT.Render);if(bU!=null&&bU.$==1){bU.$0(bT.El);bP.SetOptional(bT,"Render",null);}};_4.DoSyncElement=function(bT){var bU,bV,bW;function bX(bY,bZ){var b0,b1,b2,b3;while(true){if(bY!=null&&bY.$==1)return bY.$0.El;else if(bY!=null&&bY.$==2){b1=bY.$0;if(b1.Dirty){b1.Dirty=false;return _4.InsertDoc(bU,b1.Current,bZ);}else bY=b1.Current;}else if(bY==null)return bZ;else if(bY!=null&&bY.$==4)return bY.$0.Text;else if(bY!=null&&bY.$==5)return bY.$0;else if(bY!=null&&bY.$==6){b0=bY.$0;b0.Dirty?b0.Dirty=false:void 0;return o.foldBack(function(b4,b5){return b4==null||b4.constructor===Q?bX(b4,b5):b4;},b0.Els,bZ);}else{b2=bY.$1;b3=bY.$0;bY=b3;bZ=bX(b2,bZ);}}}bU=bT.El;bG.Iter((bV=bT.El,function(bY){$.RemoveNode(bV,bY);}),bG.Except(bG.DocChildren(bT),bG.Children(bT.El,bP.GetOptional(bT.Delimiters))));bX(bT.Children,(bW=bP.GetOptional(bT.Delimiters),bW!=null&&bW.$==1?bW.$0[1]:null));};_5=f.DocElemNode=bP.Class({Equals:function(bT){return this.ElKey===bT.ElKey;},GetHashCode:function(){return this.ElKey;}},null,_5);_5.New=function(bT,bU,bV,bW,bX,bY){var bZ;return new _5((bZ={Attr:bT,Children:bU,El:bW,ElKey:bX},(bP.SetOptional(bZ,"Delimiters",bV),bP.SetOptional(bZ,"Render",bY),bZ)));};W.head=function(bT){return bT.$==1?bT.$0:W.listEmpty();};W.tail=function(bT){return bT.$==1?bT.$1:W.listEmpty();};W.listEmpty=function(){return j.FailWith("The input list was empty.");};_7.$cctor=function(){_7.$cctor=a.ignore;_7.counter=0;};_8=f.Elt=bP.Class({},v,_8);_8.TreeNode=function(bT,bU){var bV,bW;function bX(bY){return bY[1];}bV=bi.Create(bU);return new _8.New$1({$:6,$0:bT},O.Map2Unit((bW=o.map(function(bY){return bg.Updates(bX(bY));},bT.Attrs),K.TreeReduce(O.Const(),O.Map2Unit,bW)),bV.v),o.get(bT.Els,0),bV);};_8.New$1=bP.Ctor(function(bT,bU,bV,bW){v.New.call(this,bT,bU);this.docNode$1=bT;this.updates$1=bU;this.elt=bV;this.rvUpdates=bW;},_8);_9.convertTextNode=function(bT){var bU,bV,bW,bX,bY,bZ;bU=null;bV=0;bX=bT.textContent;bY=new a.RegExp(H.TextHoleRE(),"g");while(bU=bY.exec(bX),bU!==null){bT.parentNode.insertBefore(self.document.createTextNode(_.string(bX,{$:1,$0:bV},{$:1,$0:bY.lastIndex-o.get(bU,0).length-1})),bT);bV=bY.lastIndex;bZ=self.document.createElement("span");bZ.setAttribute("ws-replace",o.get(bU,1).toLowerCase());bT.parentNode.insertBefore(bZ,bT);}bY.lastIndex=0;bT.textContent=_.string(bX,{$:1,$0:bV},null);};_9.failNotLoaded=function(bT){bQ.warn("Instantiating non-loaded template",bT);};_9.fillTextHole=function(bT,bU,bV){var bW;bW=bT.querySelector("[ws-replace]");return s.Equals(bW,null)?(bQ.warn("Filling non-existent text hole",bV),null):(bW.parentNode.replaceChild(self.document.createTextNode(bU),bW),{$:1,$0:bW.getAttribute("ws-replace")});};_9.removeHolesExcept=function(bT,bU){function bV(bW){H.foreachNotPreserved(bT,"["+bW+"]",function(bX){if(!bU.Contains(bX.getAttribute(bW)))bX.removeAttribute(bW);});}bV("ws-attr");bV("ws-onafterrender");bV("ws-var");H.foreachNotPreserved(bT,"[ws-hole]",function(bW){if(!bU.Contains(bW.getAttribute("ws-hole"))){bW.removeAttribute("ws-hole");while(bW.hasChildNodes())bW.removeChild(bW.lastChild);}});H.foreachNotPreserved(bT,"[ws-replace]",function(bW){if(!bU.Contains(bW.getAttribute("ws-replace")))bW.parentNode.removeChild(bW);});H.foreachNotPreserved(bT,"[ws-on]",function(bW){bW.setAttribute("ws-on",D.concat(" ",o.filter(function(bX){return bU.Contains(o.get(D.SplitChars(bX,[":"],1),1));},D.SplitChars(bW.getAttribute("ws-on"),[" "],1))));});H.foreachNotPreserved(bT,"[ws-attr-holes]",function(bW){var bX,bY,bZ,b0,b1;bX=D.SplitChars(bW.getAttribute("ws-attr-holes"),[" "],1);for(bY=0,bZ=bX.length-1;bY<=bZ;bY++){b0=o.get(bX,bY);bW.setAttribute(b0,(b1=new a.RegExp(H.TextHoleRE(),"g"),bW.getAttribute(b0).replace(b1,function(b2,b3){return bU.Contains(b3)?b2:"";})));}});};_9.fillInstanceAttrs=function(bT,bU){var bV,bW,bX,bY,bZ;_9.convertAttrs(bU);bV=bU.nodeName.toLowerCase();bW=bT.querySelector("[ws-attr="+bV+"]");if(s.Equals(bW,null))bQ.warn("Filling non-existent attr hole",bV);else{bW.removeAttribute("ws-attr");for(bX=0,bY=bU.attributes.length-1;bX<=bY;bX++){bZ=bU.attributes.item(bX);if(bZ.name==="class"&&bW.hasAttribute("class"))bW.setAttribute("class",bW.getAttribute("class")+" "+bZ.nodeValue);else bW.setAttribute(bZ.name,bZ.nodeValue);}}};_9.mapHoles=function(bT,bU){function bV(bW){H.foreachNotPreserved(bT,"["+bW+"]",function(bX){var bY,bZ;bY=(bZ=null,[bU.TryGetValue(bX.getAttribute(bW).toLowerCase(),{get:function(){return bZ;},set:function(b0){bZ=b0;}}),bZ]);if(bY[0])bX.setAttribute(bW,bY[1]);});}bV("ws-hole");bV("ws-replace");bV("ws-attr");bV("ws-onafterrender");bV("ws-var");H.foreachNotPreserved(bT,"[ws-on]",function(bW){bW.setAttribute("ws-on",D.concat(" ",o.map(function(bX){var bY,bZ,b0;bY=D.SplitChars(bX,[":"],1);bZ=(b0=null,[bU.TryGetValue(o.get(bY,1),{get:function(){return b0;},set:function(b1){b0=b1;}}),b0]);return bZ[0]?o.get(bY,0)+":"+bZ[1]:bX;},D.SplitChars(bW.getAttribute("ws-on"),[" "],1))));});H.foreachNotPreserved(bT,"[ws-attr-holes]",function(bW){var bX,bY,bZ;bX=D.SplitChars(bW.getAttribute("ws-attr-holes"),[" "],1);for(bY=0,bZ=bX.length-1;bY<=bZ;bY++)(function(){var b0;function b1(b2,b3){var b4;b4=j.KeyValue(b3);return b2.replace(new a.RegExp("\\${"+b4[0]+"}","ig"),"${"+b4[1]+"}");}b0=o.get(bX,bY);return bW.setAttribute(b0,(((bP.Curried3(u.fold))(b1))(bW.getAttribute(b0)))(bU));}());});};_9.fill=function(bT,bU,bV){while(true)if(bT.hasChildNodes())bV=bU.insertBefore(bT.lastChild,bV);else return null;};_9.convertAttrs=function(bT){var bV,bW,bX,bY,bZ,b0,b1,b2;function bU(b3){var b4;b4=bT.getAttribute(b3);if(b4===null);else bT.setAttribute(b3,b4.toLowerCase());}bV=bT.attributes;bW=[];bX=[];bY=[];for(bZ=0,b0=bV.length-1;bZ<=b0;bZ++){b1=bV.item(bZ);if(D.StartsWith(b1.nodeName,"ws-on")&&b1.nodeName!=="ws-onafterrender"&&b1.nodeName!=="ws-on"){bW.push(b1.nodeName);bX.push(_.string(b1.nodeName,{$:1,$0:"ws-on".length},null)+":"+b1.nodeValue.toLowerCase());}else!D.StartsWith(b1.nodeName,"ws-")&&(new a.RegExp(H.TextHoleRE())).test(b1.nodeValue)?(b1.nodeValue=(b2=new a.RegExp(H.TextHoleRE(),"g"),b1.nodeValue.replace(b2,function(b3,b4){return"${"+b4.toLowerCase()+"}";})),bY.push(b1.nodeName)):void 0;}if(!(bX.length==0))bT.setAttribute("ws-on",D.concat(" ",bX));if(!(bY.length==0))bT.setAttribute("ws-attr-holes",D.concat(" ",bY));bU("ws-hole");bU("ws-replace");bU("ws-attr");bU("ws-onafterrender");bU("ws-var");o.iter(function(b3){bT.removeAttribute(b3);},bW);};_.string=function(bT,bU,bV){var bW,bX;return bU==null?bV!=null&&bV.$==1?(bW=bV.$0,bW<0?"":bT.slice(0,bW+1)):"":bV==null?bT.slice(bU.$0):(bX=bV.$0,bX<0?"":bT.slice(bU.$0,bX+1));};$.ParseHTMLIntoFakeRoot=function(bT){var bU,bV,bW,bX,bY;function bZ(b0,b1){var b2;while(true)if(b1===0)return b0;else{b2=b1;b0=b0.lastChild;b1=b2-1;}}bU=self.document.createElement("div");return!$.rhtml().test(bT)?(bU.appendChild(self.document.createTextNode(bT)),bU):(bV=(bW=$.rtagName().exec(bT),s.Equals(bW,null)?"":o.get(bW,1).toLowerCase()),(bX=(bY=($.wrapMap())[bV],bY?bY:$.defaultWrap()),(bU.innerHTML=bX[1]+bT.replace($.rxhtmlTag(),"<$1></$2>")+bX[2],bZ(bU,bX[0]))));};$.ChildrenArray=function(bT){var bU,bV,bW;bU=[];for(bV=0,bW=bT.childNodes.length-1;bV<=bW;bV++)bU.push(bT.childNodes[bV]);return bU;};$.rhtml=function(){bs.$cctor();return bs.rhtml;};$.wrapMap=function(){bs.$cctor();return bs.wrapMap;};$.defaultWrap=function(){bs.$cctor();return bs.defaultWrap;};$.rxhtmlTag=function(){bs.$cctor();return bs.rxhtmlTag;};$.rtagName=function(){bs.$cctor();return bs.rtagName;};$.IterSelector=function(bT,bU,bV){var bW,bX,bY;bW=bT.querySelectorAll(bU);for(bX=0,bY=bW.length-1;bX<=bY;bX++)bV(bW[bX]);};$.InsertAt=function(bT,bU,bV){var bW;if(!(bV.parentNode===bT&&bU===(bW=bV.nextSibling,s.Equals(bW,null)?null:bW)))bT.insertBefore(bV,bU);};$.RemoveNode=function(bT,bU){if(bU.parentNode===bT)bT.removeChild(bU);};u.insufficient=function(){return j.FailWith("The input sequence has an insufficient number of elements.");};ba=B.KeyCollection=bP.Class({GetEnumerator$1:function(){return I.Get(u.map(function(bT){return bT.K;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},e,ba);ba.New=bP.Ctor(function(bT){e.New.call(this);this.d=bT;},ba);bb.get_UseAnimations=function(){return bo.UseAnimations();};bb.Play=function(bT){var bU;bU=null;return bn.Delay(function(){return bn.Bind(bb.Run(a.ignore,bo.Actions(bT)),function(){bo.Finalize(bT);return bn.Return(null);});});};bb.Append=function(bT,bU){return{$:0,$0:bu.Append(bT.$0,bU.$0)};};bb.Run=function(bT,bU){var bV;function bW(bX){function bY(bZ){return function(b0){var b1;b1=b0-bZ;bU.Compute(b1);bT();return b1<=bV?void a.requestAnimationFrame(function(b2){(bY(bZ))(b2);}):bX();};}a.requestAnimationFrame(function(bZ){(bY(bZ))(bZ);});}bV=bU.Duration;return bV===0?bn.Zero():bn.FromContinuations(function(bX,bY,bZ){return bW.apply(null,[bX,bY,bZ]);});};bb.Concat=function(bT){return{$:0,$0:bu.Concat(u.map(bo.List,bT))};};bb.get_Empty=function(){return{$:0,$0:bu.Empty()};};bc.BatchUpdatesEnabled=function(){bp.$cctor();return bp.BatchUpdatesEnabled;};bd.StartProcessor=function(bT){var bU;function bV(){var bW;bW=null;return bn.Delay(function(){return bn.Bind(bT,function(){var bX;bX=bU[0];return s.Equals(bX,1)?(bU[0]=0,bn.Zero()):s.Equals(bX,2)?(bU[0]=1,bV()):bn.Zero();});});}bU=[0];return function(){var bW;bW=bU[0];if(s.Equals(bW,0)){bU[0]=1;bn.Start(bV(),null);}else s.Equals(bW,1)?bU[0]=2:void 0;};};bf.New=function(bT,bU,bV,bW){var bX;bX={DynElem:bT,DynFlags:bU,DynNodes:bV};bP.SetOptional(bX,"OnAfterRender",bW);return bX;};bg.Insert=function(bT,bU){var bV,bW,bX;function bY(bZ){var b0,b1;while(true)if(!(bZ===null)){if(bZ!=null&&bZ.$==1)return bV.push(bZ.$0);else if(bZ!=null&&bZ.$==2){b0=bZ.$1;b1=bZ.$0;bY(b1);bZ=b0;}else return bZ!=null&&bZ.$==3?bZ.$0(bT):bZ!=null&&bZ.$==4?bW.push(bZ.$0):null;}else return null;}bV=[];bW=[];bY(bU);bX=bV.slice(0);return bf.New(bT,bg.Flags(bU),bX,bW.length===0?null:{$:1,$0:function(bZ){u.iter(function(b0){b0(bZ);},bW);}});};bg.Updates=function(bT){return K.MapTreeReduce(function(bU){return bU.NChanged();},O.Const(),O.Map2Unit,bT.DynNodes);};bg.Empty=function(bT){return bf.New(bT,0,[],null);};bg.Flags=function(bT){return bT!==null&&bT.hasOwnProperty("flags")?bT.flags:0;};bg.Static=function(bT){return new Y({$:3,$0:bT});};bg.Dynamic=function(bT,bU){return new Y({$:1,$0:new bw.New(bT,bU)});};bg.EmptyAttr=function(){bv.$cctor();return bv.EmptyAttr;};bg.HasExitAnim=function(bT){var bU;bU=2;return(bT.DynFlags&bU)===bU;};bg.GetExitAnim=function(bT){return bg.GetAnim(bT,function(bU,bV){return bU.NGetExitAnim(bV);});};bg.HasEnterAnim=function(bT){var bU;bU=1;return(bT.DynFlags&bU)===bU;};bg.GetEnterAnim=function(bT){return bg.GetAnim(bT,function(bU,bV){return bU.NGetEnterAnim(bV);});};bg.HasChangeAnim=function(bT){var bU;bU=4;return(bT.DynFlags&bU)===bU;};bg.GetChangeAnim=function(bT){return bg.GetAnim(bT,function(bU,bV){return bU.NGetChangeAnim(bV);});};bg.AppendTree=function(bT,bU){var bV;return bT===null?bU:bU===null?bT:(bV=new Y({$:2,$0:bT,$1:bU}),(bg.SetFlags(bV,bg.Flags(bT)|bg.Flags(bU)),bV));};bg.GetAnim=function(bT,bU){return bb.Concat(o.map(function(bV){return bU(bV,bT.DynElem);},bT.DynNodes));};bg.Sync=function(bT,bU){o.iter(function(bV){bV.NSync(bT);},bU.DynNodes);};bg.SetFlags=function(bT,bU){bT.flags=bU;};bh.Handler=function(bT,bU){return bg.Static(function(bV){bV.addEventListener(bT,function(bW){return(bU(bV))(bW);},false);});};bh.OnAfterRender=function(bT){return new Y({$:4,$0:bT});};bh.Value=function(bT){return bh.ValueWith(br.StringApply(),bT);};bh.Checked=function(bT){return bh.ValueWith(br.BoolCheckedApply(),bT);};bh.IntValue=function(bT){return bh.ValueWith(br.IntApplyChecked(),bT);};bh.IntValueUnchecked=function(bT){return bh.ValueWith(br.IntApplyUnchecked(),bT);};bh.FloatValue=function(bT){return bh.ValueWith(br.FloatApplyChecked(),bT);};bh.FloatValueUnchecked=function(bT){return bh.ValueWith(br.FloatApplyUnchecked(),bT);};bh.Dynamic=function(bT,bU){return bg.Dynamic(bU,function(bV){return function(bW){return bV.setAttribute(bT,bW);};});};bh.ValueWith=function(bT,bU){var bV;bV=bT(bU);return Y.Append(bg.Static(bV[0]),bh.DynamicCustom(bV[1],bV[2]));};bh.DynamicCustom=function(bT,bU){return bg.Dynamic(bU,bT);};bi=f.Updates=bP.Class({},null,bi);bi.Create=function(bT){var bU;bU=null;bU=bi.New(bT,null,function(){var bV;bV=bU.s;return bV===null?(bV=x.Copy(bU.c()),bU.s=bV,x.WhenObsoleteRun(bV,function(){bU.s=null;}),bV):bV;});return bU;};bi.New=function(bT,bU,bV){return new bi({c:bT,s:bU,v:bV});};bj=B.ValueCollection=bP.Class({GetEnumerator$1:function(){return I.Get(u.map(function(bT){return bT.V;},this.d));},GetEnumerator:function(){return this.GetEnumerator$1();},GetEnumerator0:function(){return this.GetEnumerator$1();}},e,bj);bj.New=bP.Ctor(function(bT){e.New.call(this);this.d=bT;},bj);bl.New=function(bT,bU){return{PreviousNodes:bT,Top:bU};};bm.get_Empty=function(){return{$:0,$0:new R.New$3()};};bm.FindAll=function(bT){var bU;function bV(bY,bZ){var b0,b1,b2,b3,b4;while(true)switch(bY){case 0:if(bZ!=null&&bZ.$==0){b1=bZ.$1;b2=bZ.$0;bV(0,b2);bZ=b1;}else if(bZ!=null&&bZ.$==1){b3=bZ.$0;bZ=b3;bY=1;}else if(bZ!=null&&bZ.$==2){b4=bZ.$0;bZ=b4.Current;}else return bZ!=null&&bZ.$==6?(b0=bZ.$0.Holes,(function(b5){return function(b6){o.iter(b5,b6);};}(bX))(b0)):null;break;case 1:bU.push(bZ);bZ=bZ.Children;bY=0;break;}}function bW(bY){return bV(0,bY);}function bX(bY){return bV(1,bY);}bU=[];bW(bT);return{$:0,$0:new R.New$2(bU)};};bm.Filter=function(bT,bU){return{$:0,$0:bC.Filter(bT,bU.$0)};};bm.Except=function(bT,bU){return{$:0,$0:bC.Except(bT.$0,bU.$0)};};bm.ToArray=function(bT){return bC.ToArray(bT.$0);};bm.Intersect=function(bT,bU){return{$:0,$0:bC.Intersect(bT.$0,bU.$0)};};bn.Delay=function(bT){return function(bU){try{(bT(null))(bU);}catch(bV){bU.k({$:1,$0:bV});}};};bn.Bind=function(bT,bU){return bn.checkCancel(function(bV){bT(bz.New(function(bW){var bX;if(bW.$==0){bX=bW.$0;bn.scheduler().Fork(function(){try{(bU(bX))(bV);}catch(bY){bV.k({$:1,$0:bY});}});}else bn.scheduler().Fork(function(){bV.k(bW);});},bV.ct));});};bn.Zero=function(){bA.$cctor();return bA.Zero;};bn.Start=function(bT,bU){var bV,bW;bV=(bW=(bn.defCTS())[0],bU==null?bW:bU.$0);bn.scheduler().Fork(function(){if(!bV.c)bT(bz.New(function(bX){if(bX.$==1)bn.UncaughtAsyncError(bX.$0);},bV));});};bn.Return=function(bT){return function(bU){bU.k({$:0,$0:bT});};};bn.scheduler=function(){bA.$cctor();return bA.scheduler;};bn.checkCancel=function(bT){return function(bU){if(bU.ct.c)bn.cancel(bU);else bT(bU);};};bn.defCTS=function(){bA.$cctor();return bA.defCTS;};bn.UncaughtAsyncError=function(bT){bQ.log("WebSharper: Uncaught asynchronous exception",bT);};bn.FromContinuations=function(bT){return function(bU){var bV;function bW(bX){if(bV[0])j.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");else{bV[0]=true;bn.scheduler().Fork(bX);}}bV=[false];bT(function(bX){bW(function(){bU.k({$:0,$0:bX});});},function(bX){bW(function(){bU.k({$:1,$0:bX});});},function(bX){bW(function(){bU.k({$:2,$0:bX});});});};};bn.cancel=function(bT){bT.k({$:2,$0:new bJ.New(bT.ct)});};bo.UseAnimations=function(){bt.$cctor();return bt.UseAnimations;};bo.Actions=function(bT){return bo.ConcatActions(o.choose(function(bU){return bU.$==1?{$:1,$0:bU.$0}:null;},bu.ToArray(bT.$0)));};bo.Finalize=function(bT){o.iter(function(bU){if(bU.$==0)bU.$0();},bu.ToArray(bT.$0));};bo.ConcatActions=function(bT){var bU,bV,bW,bX;bU=K.ofSeqNonCopying(bT);bV=o.length(bU);return bV===0?bo.Const():bV===1?o.get(bU,0):(bW=u.max(u.map(function(bY){return bY.Duration;},bU)),(bX=o.map(function(bY){return bo.Prolong(bW,bY);},bU),bo.Def(bW,function(bY){o.iter(function(bZ){bZ.Compute(bY);},bX);})));};bo.List=function(bT){return bT.$0;};bo.Const=function(bT){return bo.Def(0,function(){return bT;});};bo.Def=function(bT,bU){return{Compute:bU,Duration:bT};};bo.Prolong=function(bT,bU){var bV,bW,bX;bV=bU.Compute;bW=bU.Duration;bX=bK.Create(function(){return bU.Compute(bU.Duration);});return{Compute:function(bY){return bY>=bW?bX.f():bV(bY);},Duration:bT};};bp.$cctor=function(){bp.$cctor=a.ignore;bp.BatchUpdatesEnabled=true;};bq.concat=function(bT){var bU,bV;bU=[];for(var bW in bT)bU.push.apply(bU,bT[bW]);return bU;};br.StringApply=function(){bv.$cctor();return bv.StringApply;};br.BoolCheckedApply=function(){bv.$cctor();return bv.BoolCheckedApply;};br.IntApplyChecked=function(){bv.$cctor();return bv.IntApplyChecked;};br.IntApplyUnchecked=function(){bv.$cctor();return bv.IntApplyUnchecked;};br.FloatApplyChecked=function(){bv.$cctor();return bv.FloatApplyChecked;};br.FloatApplyUnchecked=function(){bv.$cctor();return bv.FloatApplyUnchecked;};br.ApplyValue=function(bT,bU,bV){var bW;function bX(bY,bZ){return bZ==null?null:bY(bZ.$0);}bW=null;return[function(bY){function bZ(){bV.UpdateMaybe(function(b0){var b1;bW=bT(bY);return bW!=null&&bW.$==1&&(!s.Equals(bW.$0,b0)&&(b1=[bW,bW.$0],true))?b1[0]:null;});}bY.addEventListener("change",bZ);bY.addEventListener("input",bZ);bY.addEventListener("keypress",bZ);},function(bY){var bZ;bZ=bU(bY);return function(b0){return bX(bZ,b0);};},O.Map(function(bY){var bZ;return bW!=null&&bW.$==1&&(s.Equals(bW.$0,bY)&&(bZ=bW.$0,true))?null:{$:1,$0:bY};},bV.get_View())];};br.StringSet=function(){bv.$cctor();return bv.StringSet;};br.StringGet=function(){bv.$cctor();return bv.StringGet;};br.IntSetUnchecked=function(){bv.$cctor();return bv.IntSetUnchecked;};br.IntGetUnchecked=function(){bv.$cctor();return bv.IntGetUnchecked;};br.IntSetChecked=function(){bv.$cctor();return bv.IntSetChecked;};br.IntGetChecked=function(){bv.$cctor();return bv.IntGetChecked;};br.FloatSetUnchecked=function(){bv.$cctor();return bv.FloatSetUnchecked;};br.FloatGetUnchecked=function(){bv.$cctor();return bv.FloatGetUnchecked;};br.FloatSetChecked=function(){bv.$cctor();return bv.FloatSetChecked;};br.FloatGetChecked=function(){bv.$cctor();return bv.FloatGetChecked;};bs.$cctor=function(){var bT;bs.$cctor=a.ignore;bs.rxhtmlTag=new a.RegExp("<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>","gi");bs.rtagName=new a.RegExp("<([\\w:]+)");bs.rhtml=new a.RegExp("<|&#?\\w+;");bs.wrapMap=(bT=[1,"<table>","</table>"],{option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:bT,tbody:bT,tfoot:bT,tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><colgroup>","</colgoup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"]});bs.defaultWrap=[0,"",""];};bt.$cctor=function(){bt.$cctor=a.ignore;bt.CubicInOut=by.Custom(function(bT){var bU;bU=bT*bT;return 3*bU-2*(bU*bT);});bt.UseAnimations=true;};bu.Append=function(bT,bU){return bT.$==0?bU:bU.$==0?bT:{$:2,$0:bT,$1:bU};};bu.ToArray=function(bT){var bU;function bV(bW){var bX,bY;while(true)if(bW.$==1)return bU.push(bW.$0);else if(bW.$==2){bX=bW.$1;bY=bW.$0;bV(bY);bW=bX;}else return bW.$==3?o.iter(function(bZ){bU.push(bZ);},bW.$0):null;}bU=[];bV(bT);return bU.slice(0);};bu.Concat=function(bT){var bU;bU=K.ofSeqNonCopying(bT);return K.TreeReduce(bu.Empty(),bu.Append,bU);};bu.Empty=function(){bL.$cctor();return bL.Empty;};bv.$cctor=function(){var bT,bU,bV,bW,bX,bY,bZ,b0,b1,b2;bv.$cctor=a.ignore;bv.EmptyAttr=null;bv.BoolCheckedApply=function(b3){function b4(b5,b6){return b6!=null&&b6.$==1?void(b5.checked=b6.$0):null;}return[function(b5){b5.addEventListener("change",function(){return!s.Equals(b3.Get(),b5.checked)?b3.Set(b5.checked):null;});},function(b5){return function(b6){return b4(b5,b6);};},O.Map(function(b5){return{$:1,$0:b5};},b3.get_View())];};bv.StringSet=function(b3){return function(b4){b3.value=b4;};};bv.StringGet=function(b3){return{$:1,$0:b3.value};};bv.StringApply=(bT=br.StringGet(),(bU=br.StringSet(),function(b3){return br.ApplyValue(bT,bU,b3);}));bv.IntSetUnchecked=function(b3){return function(b4){b3.value=a.String(b4);};};bv.IntGetUnchecked=function(b3){var b4,b5;b4=b3.value;return bE.isBlank(b4)?{$:1,$0:0}:(b5=+b4,b5!==b5>>0?null:{$:1,$0:b5});};bv.IntApplyUnchecked=(bV=br.IntGetUnchecked(),(bW=br.IntSetUnchecked(),function(b3){return br.ApplyValue(bV,bW,b3);}));bv.IntSetChecked=function(b3){return function(b4){var b5;b5=b4.get_Input();return b3.value!==b5?void(b3.value=b5):null;};};bv.IntGetChecked=function(b3){var b4,b5,b6;b4=b3.value;return{$:1,$0:bE.isBlank(b4)?(b3.checkValidity?b3.checkValidity():true)?new Z({$:2,$0:b4}):new Z({$:1,$0:b4}):(b5=(b6=0,[y.TryParseInt32(b4,{get:function(){return b6;},set:function(b7){b6=b7;}}),b6]),b5[0]?new Z({$:0,$0:b5[1],$1:b4}):new Z({$:1,$0:b4}))};};bv.IntApplyChecked=(bX=br.IntGetChecked(),(bY=br.IntSetChecked(),function(b3){return br.ApplyValue(bX,bY,b3);}));bv.FloatSetUnchecked=function(b3){return function(b4){b3.value=a.String(b4);};};bv.FloatGetUnchecked=function(b3){var b4,b5;b4=b3.value;return bE.isBlank(b4)?{$:1,$0:0}:(b5=+b4,a.isNaN(b5)?null:{$:1,$0:b5});};bv.FloatApplyUnchecked=(bZ=br.FloatGetUnchecked(),(b0=br.FloatSetUnchecked(),function(b3){return br.ApplyValue(bZ,b0,b3);}));bv.FloatSetChecked=function(b3){return function(b4){var b5;b5=b4.get_Input();return b3.value!==b5?void(b3.value=b5):null;};};bv.FloatGetChecked=function(b3){var b4,b5;b4=b3.value;return{$:1,$0:bE.isBlank(b4)?(b3.checkValidity?b3.checkValidity():true)?new Z({$:2,$0:b4}):new Z({$:1,$0:b4}):(b5=+b4,a.isNaN(b5)?new Z({$:1,$0:b4}):new Z({$:0,$0:b5,$1:b4}))};};bv.FloatApplyChecked=(b1=br.FloatGetChecked(),(b2=br.FloatSetChecked(),function(b3){return br.ApplyValue(b1,b2,b3);}));};bw=f.DynamicAttrNode=bP.Class({NChanged:function(){return this.updates;},NGetExitAnim:function(bT){return bb.get_Empty();},NGetEnterAnim:function(bT){return bb.get_Empty();},NGetChangeAnim:function(bT){return bb.get_Empty();},NSync:function(bT){if(this.dirty){(this.push(bT))(this.value);this.dirty=false;}}},e,bw);bw.New=bP.Ctor(function(bT,bU){var bV;bV=this;e.New.call(this);this.push=bU;this.value=void 0;this.dirty=false;this.updates=O.Map(function(bW){bV.value=bW;bV.dirty=true;},bT);},bw);bx=bn.Scheduler=bP.Class({Fork:function(bT){var bU;bU=this;this.robin.push(bT);if(this.idle){this.idle=false;a.setTimeout(function(){bU.tick();},0);}},tick:function(){var bT,bU,bV;bU=this;bV=bS.now();bT=true;while(bT)if(this.robin.length===0){this.idle=true;bT=false;}else{(this.robin.shift())();bS.now()-bV>40?(a.setTimeout(function(){bU.tick();},0),bT=false):void 0;}}},e,bx);bx.New=bP.Ctor(function(){e.New.call(this);this.idle=true;this.robin=[];},bx);by=f.Easing=bP.Class({},e,by);by.Custom=function(bT){return new by.New(bT);};by.New=bP.Ctor(function(bT){e.New.call(this);this.transformTime=bT;},by);bz.New=function(bT,bU){return{k:bT,ct:bU};};bA.$cctor=function(){bA.$cctor=a.ignore;bA.noneCT=bB.New(false,[]);bA.scheduler=new bx.New();bA.defCTS=[new bF.New()];bA.Zero=bn.Return();bA.GetCT=function(bT){bT.k({$:0,$0:bT.ct});};};bB.New=function(bT,bU){return{c:bT,r:bU};};bC.Filter=function(bT,bU){return new R.New$2(o.filter(bT,bC.ToArray(bU)));};bC.Except=function(bT,bU){var bV;bV=new R.New$2(bC.ToArray(bU));bV.ExceptWith(bC.ToArray(bT));return bV;};bC.ToArray=function(bT){var bU;bU=o.create(bT.get_Count(),void 0);bT.CopyTo(bU);return bU;};bC.Intersect=function(bT,bU){var bV;bV=new R.New$2(bC.ToArray(bT));bV.IntersectWith(bC.ToArray(bU));return bV;};bD.Clear=function(bT){bT.splice(0,o.length(bT));};bE.isBlank=function(bT){return D.forall(bH.IsWhiteSpace,bT);};bF=d.CancellationTokenSource=bP.Class({},e,bF);bF.New=bP.Ctor(function(){e.New.call(this);this.c=false;this.pending=null;this.r=[];this.init=1;},bF);bG.Children=function(bT,bU){var bV,bW,bX;if(bU!=null&&bU.$==1){bX=[];bV=bU.$0[0].nextSibling;while(bV!==bU.$0[1]){bX.push(bV);bV=bV.nextSibling;}return{$:0,$0:bX};}else return{$:0,$0:o.init(bT.childNodes.length,(bW=bT.childNodes,function(bY){return bW[bY];}))};};bG.Except=function(bT,bU){var bV;bV=bT.$0;return{$:0,$0:o.filter(function(bW){return o.forall(function(bX){return!(bW===bX);},bV);},bU.$0)};};bG.Iter=function(bT,bU){o.iter(bT,bU.$0);};bG.DocChildren=function(bT){var bU;function bV(bW){var bX,bY,bZ,b0;while(true){if(bW!=null&&bW.$==2){bY=bW.$0;bW=bY.Current;}else if(bW!=null&&bW.$==1)return bU.push(bW.$0.El);else if(bW==null)return null;else if(bW!=null&&bW.$==5)return bU.push(bW.$0);else if(bW!=null&&bW.$==4)return bU.push(bW.$0.Text);else if(bW!=null&&bW.$==6){bX=bW.$0.Els;return(function(b1){return function(b2){o.iter(b1,b2);};}(function(b1){if(b1==null||b1.constructor===Q)bV(b1);else bU.push(b1);}))(bX);}else{bZ=bW.$1;b0=bW.$0;bV(b0);bW=bZ;}}}bU=[];bV(bT.Children);return{$:0,$0:K.ofSeqNonCopying(bU)};};bH.IsWhiteSpace=function(bT){return bT.match(new a.RegExp("\\s"))!==null;};y.TryParse=function(bT,bU,bV,bW){var bX,bY;bX=+bT;bY=bX===bX-bX%1&&bX>=bU&&bX<=bV;if(bY)bW.set(bX);return bY;};bJ=d.OperationCanceledException=bP.Class({},bI,bJ);bJ.New=bP.Ctor(function(bT){bJ.New$1.call(this,"The operation was canceled.",null,bT);},bJ);bJ.New$1=bP.Ctor(function(bT,bU,bV){this.message=bT;this.inner=bU;Q.setPrototypeOf(this,bJ.prototype);this.ct=bV;},bJ);bK.Create=function(bT){return bN.New(false,bT,bK.forceLazy);};bK.forceLazy=function(){var bT;bT=this.v();this.c=true;this.v=bT;this.f=bK.cachedLazy;return bT;};bK.cachedLazy=function(){return this.v;};bL.$cctor=function(){bL.$cctor=a.ignore;bL.Empty={$:0};};bN.New=function(bT,bU,bV){return{c:bT,v:bU,f:bV};};bP.OnLoad(function(){c.Main();});}(self));


if (typeof IntelliFactory !=='undefined') {
  IntelliFactory.Runtime.ScriptBasePath = '/Content/';
  IntelliFactory.Runtime.Start();
}
